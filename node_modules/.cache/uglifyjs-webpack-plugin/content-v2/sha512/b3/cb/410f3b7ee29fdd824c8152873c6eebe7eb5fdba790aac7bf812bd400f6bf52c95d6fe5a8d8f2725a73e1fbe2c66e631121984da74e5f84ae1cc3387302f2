{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-a8e9\"],{\"907f\":function(e,t,a){},9923:function(e,t,a){\"use strict\";var r=a(\"907f\"),o=a.n(r);o.a},a164:function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Row\",[a(\"Col\",{attrs:{span:\"24\"}},[a(\"Card\",{attrs:{\"dis-hover\":!0}},[a(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"Icon\",{attrs:{type:\"md-people\"}}),e._v(\"\\n        角色列表\\n      \")],1),a(\"Card\",{staticStyle:{\"padding-top\":\"20px\"},attrs:{padding:0}},[a(\"Form\",{ref:\"searchData\",staticStyle:{margin:\"0px\"},attrs:{model:e.searchData,rules:e.searchData,inline:\"\"}},[a(\"FormItem\",{attrs:{label:\"名称\",prop:\"name\",\"label-width\":50}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"名称\"},model:{value:e.searchData.name,callback:function(t){e.$set(e.searchData,\"name\",t)},expression:\"searchData.name\"}})],1),a(\"FormItem\",{attrs:{label:\"备注信息\",prop:\"descn\",\"label-width\":70}},[a(\"Input\",{attrs:{placeholder:\"备注信息\"},model:{value:e.searchData.descn,callback:function(t){e.$set(e.searchData,\"descn\",t)},expression:\"searchData.descn\"}})],1),a(\"FormItem\",{attrs:{label:\"状态\",prop:\"status\",\"label-width\":50}},[a(\"Select\",{staticStyle:{width:\"70px\"},attrs:{clearable:\"\"},model:{value:e.searchData.status,callback:function(t){e.$set(e.searchData,\"status\",t)},expression:\"searchData.status\"}},[a(\"Option\",{attrs:{value:\"0\"}},[e._v(\"不启用\")]),a(\"Option\",{attrs:{value:\"1\",checked:\"\"}},[e._v(\"正常\")]),a(\"Option\",{attrs:{value:\"2\"}},[e._v(\"禁用\")]),a(\"Option\",{attrs:{value:\"3\"}},[e._v(\"删除\")])],1)],1),a(\"span\",{staticStyle:{\"padding-left\":\"50px\"}}),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"md-search\"},on:{click:e.searchSubmit}},[e._v(\"搜索\")])],1),a(\"FormItem\",[a(\"Button\",{attrs:{icon:\"md-refresh\"},on:{click:function(t){e.searchReset(\"searchData\")}}},[e._v(\"重置\")])],1)],1)],1),a(\"Card\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Row\",{attrs:{type:\"flex\",justify:\"start\"}},[a(\"ButtonGroup\",{attrs:{size:\"large\"}},[a(\"Button\",{attrs:{icon:\"md-add\"},on:{click:e.addData}},[e._v(\"添加\")]),a(\"Button\",{attrs:{icon:\"md-close\",disabled:e.canDelete},on:{click:e.deleteData}},[e._v(\"删除\")])],1),a(\"span\",{staticStyle:{\"margin-left\":\"10px\"}}),a(\"ButtonGroup\",{attrs:{size:\"large\"}},[a(\"Button\",{attrs:{icon:\"md-refresh\"},on:{click:e.refreshTable}},[e._v(\"刷新\")])],1)],1)],1),a(\"Card\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{padding:0,bordered:!1}},[a(\"Row\",[a(\"Table\",{attrs:{height:\"520\",loading:e.loading,columns:e.tableColumn,data:e.tableData,border:\"\",stripe:\"\"},on:{\"on-selection-change\":e.selectionChange}})],1),a(\"Row\",{attrs:{type:\"flex\",justify:\"center\"}},[a(\"Page\",{staticStyle:{margin:\"10px\"},attrs:{total:e.pageInfo.totalPages,current:e.pageInfo.currentPage,\"page-size\":e.pageInfo.pageSize,\"page-size-opts\":e.pageInfo.pageSizeOpt,\"show-elevator\":\"\",\"show-sizer\":\"\",\"show-total\":\"\",placement:\"top\"},on:{\"on-change\":e.changePage,\"on-page-size-change\":e.changeSize}})],1)],1)],1)],1)],1),a(\"Modal\",{attrs:{title:e.modalFormItem.modalTitle,closable:!1,\"mask-closable\":!1,loading:e.modalLoading,\"ok-text\":\"提交\",\"cancel-text\":\"取消\"},on:{\"on-ok\":function(t){e.modalSubmit(\"modalFormItem\")},\"on-cancel\":function(t){e.modalCancel(\"modalFormItem\")}},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:\"addModal\"}},[a(\"Form\",{ref:\"modalFormItem\",attrs:{model:e.modalFormItem,rules:e.formRuleValidate,\"label-width\":80}},[a(\"FormItem\",{attrs:{label:\"名称\",prop:\"name\"}},[a(\"Input\",{attrs:{placeholder:\"名称...\"},model:{value:e.modalFormItem.name,callback:function(t){e.$set(e.modalFormItem,\"name\",t)},expression:\"modalFormItem.name\"}})],1),a(\"FormItem\",{attrs:{label:\"用户状态\",prop:\"status\"}},[a(\"Select\",{model:{value:e.modalFormItem.status,callback:function(t){e.$set(e.modalFormItem,\"status\",t)},expression:\"modalFormItem.status\"}},[a(\"Option\",{attrs:{value:\"0\"}},[e._v(\"不启用\")]),a(\"Option\",{attrs:{value:\"1\"}},[e._v(\"正常\")]),a(\"Option\",{attrs:{value:\"2\"}},[e._v(\"禁用\")]),a(\"Option\",{attrs:{value:\"3\",disabled:\"\"}},[e._v(\"删除\")])],1)],1),a(\"FormItem\",{attrs:{label:\"备注\",prop:\"descn\"}},[a(\"Input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:5},placeholder:\"备注信息...\"},model:{value:e.modalFormItem.descn,callback:function(t){e.$set(e.modalFormItem,\"descn\",t)},expression:\"modalFormItem.descn\"}})],1)],1)],1),a(\"Modal\",{attrs:{title:\"关联资源\",closable:!1,\"mask-closable\":!1,loading:e.modalLoading2,\"ok-text\":\"提交\",\"cancel-text\":\"取消\",width:\"600\"},on:{\"on-ok\":function(t){e.resModalSubmit()},\"on-cancel\":function(t){e.modalCancel()}},model:{value:e.resourceModal,callback:function(t){e.resourceModal=t},expression:\"resourceModal\"}},[a(\"resource-tree\",{ref:\"restree\",attrs:{roleId:e.treedata.roleId}})],1)],1)},o=[],l=(a(\"7f7f\"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"tree-split\"},[a(\"Split\",{model:{value:e.split1,callback:function(t){e.split1=t},expression:\"split1\"}},[a(\"div\",{staticClass:\"tree-split-pane\",attrs:{slot:\"left\"},slot:\"left\"},[a(\"div\",{staticClass:\"left-div\"},[a(\"Tree\",{ref:\"treedata\",attrs:{data:e.treedata,\"show-checkbox\":\"\"},on:{\"on-check-change\":e.checkChange,\"on-select-change\":e.selectChange}})],1)]),a(\"div\",{staticClass:\"tree-split-pane\",attrs:{slot:\"right\"},slot:\"right\"},[a(\"Divider\",[e._v(\"资源详情\")]),a(\"Form\",{ref:\"resourceDetail\",staticStyle:{margin:\"20px\"},attrs:{\"label-width\":60},model:{value:e.resourceDetail,callback:function(t){e.resourceDetail=t},expression:\"resourceDetail\"}},[a(\"FormItem\",{attrs:{label:\"节点\",prop:\"orderStr\"}},[a(\"Input\",{attrs:{readonly:!0},model:{value:e.resourceDetail.orderStr,callback:function(t){e.$set(e.resourceDetail,\"orderStr\",t)},expression:\"resourceDetail.orderStr\"}})],1),a(\"FormItem\",{attrs:{label:\"名称\",prop:\"title\"}},[a(\"Input\",{attrs:{readonly:!0},model:{value:e.resourceDetail.title,callback:function(t){e.$set(e.resourceDetail,\"title\",t)},expression:\"resourceDetail.title\"}})],1),a(\"FormItem\",{attrs:{label:\"路径\",prop:\"url\"}},[a(\"Input\",{attrs:{readonly:!0},model:{value:e.resourceDetail.url,callback:function(t){e.$set(e.resourceDetail,\"url\",t)},expression:\"resourceDetail.url\"}})],1),a(\"FormItem\",{attrs:{label:\"层级\",prop:\"level\"}},[a(\"Input\",{attrs:{readonly:!0},model:{value:e.resourceDetail.level,callback:function(t){e.$set(e.resourceDetail,\"level\",t)},expression:\"resourceDetail.level\"}})],1),a(\"FormItem\",{attrs:{label:\"备注\",prop:\"descn\"}},[a(\"Input\",{attrs:{readonly:!0,type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.resourceDetail.descn,callback:function(t){e.$set(e.resourceDetail,\"descn\",t)},expression:\"resourceDetail.descn\"}})],1)],1)],1)])],1)}),s=[],n=(a(\"ac6a\"),a(\"c5f6\"),{name:\"resource-tree\",props:{roleId:Number},data:function(){return{split1:.4,resourceDetail:{orderStr:\"\",title:\"\",url:\"\",level:\"\",descn:\"\"},treedata:[],allCheckedNodeId:[]}},methods:{checkChange:function(e){this.allCheckedNodeId=[],this.getAllCheckedNodeId(this.treedata),console.log(this.allCheckedNodeId)},selectChange:function(e){console.log(e),this.resourceDetail=e[0]},initTree:function(){console.log(\"init...\")},findNodes:function(e){var t=this;console.log(e);var a={roleid:e,status:\"1\"},r=\"123\";this.$axios.get(\"/admin-server/permission/findPermissionTreeData\",{params:{data:a,token:r}}).then(function(e){200==e.data.code?t.treedata=e.data.data:t.$Notice.error({title:\"错误提示\",duration:5,desc:e+\"<br/>无法获取后台数据！\"})}).catch(function(e){t.$Notice.error({title:\"错误提示\",duration:5,desc:e+\"<br/>无法获取后台数据！\"})})},getAllCheckedNodeId:function(e){var t=this;e.forEach(function(e){(e.indeterminate||e.checked)&&(t.allCheckedNodeId.push(e.id),e.children&&t.allCheckedNodeId.concat(t.getAllCheckedNodeId(e.children)))})}},mounted:function(){this.initTree()}}),i=n,d=(a(\"9923\"),a(\"2877\")),c=Object(d[\"a\"])(i,l,s,!1,null,null,null);c.options.__file=\"resource-tree.vue\";var u=c.exports,m={name:\"roleinfo-table\",components:{resourceTree:u},data:function(){var e=this;return{tableColumn:[{type:\"selection\",width:60,align:\"center\",fixed:\"left\"},{type:\"ind\",title:\"序号\",width:65,align:\"center\",render:function(t,a){return t(\"span\",a.index+(e.pageInfo.currentPage-1)*e.pageInfo.pageSize+1)}},{key:\"name\",title:\"名称\",align:\"center\",width:200},{key:\"status\",title:\"启用状态\",align:\"center\",width:100,render:function(e,t){var a=\"空值\",r=\"black\";return 0==t.row.status?(a=\"未启用\",r=\"yellow\"):1==t.row.status?(a=\"正常\",r=\"green\"):2==t.row.status?(a=\"禁用\",r=\"red\"):3==t.row.status&&(a=\"删除\",r=\"gray\"),e(\"Tag\",{props:{type:\"border\",color:r}},a)}},{key:\"createTime\",title:\"创建时间\",align:\"center\",width:150,render:function(e,t){return e(\"div\",null==t.row.createTime?\"\":new Date(t.row.createTime).format(\"yyyy-MM-dd hh:mm:ss\"))}},{key:\"updateTime\",title:\"最后更新时间\",align:\"center\",width:150,render:function(e,t){return e(\"div\",null==t.row.updateTime?\"\":new Date(t.row.updateTime).format(\"yyyy-MM-dd hh:mm:ss\"))}},{key:\"descn\",title:\"备注信息\",align:\"center\",width:150},{title:\"操作\",key:\"action\",width:200,align:\"center\",fixed:\"right\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"primary\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){e.editUser(a)}}},\"修改\"),t(\"Button\",{props:{type:\"error\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){e.deleteUser(a,!0)}}},\"删除\"),t(\"Button\",{props:{type:\"default\",size:\"small\"},on:{click:function(){e.updatePermission(a)}}},\"关联资源\")])}}],tableData:[{id:1,name:\"cs1\",status:1,createTime:null,updateTime:null,descn:\"ccccsssss1\"},{id:2,name:\"cs2\",status:2,createTime:null,updateTime:null,descn:\"ccccsssss2\"}],searchData:{name:\"\",descn:\"\",status:1},pageInfo:{totalPages:0,currentPage:1,pageSize:10,pageSizeOpt:[10,20,30,50]},value1:[1,2],addModal:!1,resourceModal:!1,modalFormItem:{modalTitle:\"\",modalSubmitType:\"\",id:\"\",name:\"\",status:1,descn:\"\"},formRuleValidate:{name:[{required:!0,message:\"名称不能为空\",trigger:\"blur\"}]},treedata:{roleId:0},loading:!0,modalLoading:!0,modalLoading2:!0,tableSelectData:[],canDelete:!0}},methods:{init:function(){},changePage:function(e){this.pageInfo.currentPage=e,this.refreshTable()},changeSize:function(e){this.pageInfo.pageSize=e,this.refreshTable()},refreshTable:function(){var e=this;this.loading=!0;var t={name:this.searchData.name,descn:this.searchData.descn,status:this.searchData.status,currentPage:this.pageInfo.currentPage,pageSize:this.pageInfo.pageSize},a=\"\";this.$axios.get(\"/admin-server/role/findRolesWithPaging\",{params:{data:t,token:a}}).then(function(t){e.pageInfo.totalPages=t.data.data.total,e.tableData=t.data.data.list,e.loading=!1}).catch(function(t){e.$Notice.error({title:\"错误提示\",duration:5,desc:t+\"<br/>无法获取后台数据！\"}),e.loading=!1})},searchSubmit:function(){this.refreshTable()},searchReset:function(e){this.$refs[e].resetFields()},addData:function(){this.modalFormItem={},this.modalFormItem.gender=1,this.modalFormItem.status=1,this.modalFormItem.modalTitle=\"添加角色\",this.modalFormItem.modalSubmitType=\"add\",this.addModal=!0},editUser:function(e){this.modalFormItem=e.row,this.modalFormItem.modalTitle=\"修改角色\",this.modalFormItem.modalSubmitType=\"edit\",this.addModal=!0},deleteData:function(e,t){var a=this;t&&(this.tableSelectData=[],this.tableSelectData[0]=e.row),this.tableSelectData.length>0&&this.$Modal.confirm({title:\"提示\",content:\"<h2>确定删除角色信息？</h2>\",onOk:function(){for(var e=new Array,t=0;t<a.tableSelectData.length;t++)e[t]=a.tableSelectData[t].id;var r=a.$qs.stringify({data:JSON.stringify(e),token:\"123\"});a.$axios.post(\"/admin-server/role/deleteRole\",r).then(function(e){200==e.data.code&&(a.$Notice.success({duration:3,desc:\"删除角色成功！\"}),a.refreshTable(),a.$Loading.finish()),500==e.data.code&&(a.$Modal.error({width:650,title:\"错误提示\",content:\"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \"+e.data.msg+\" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\"+e.data.data+\"</p>\"}),a.$Loading.error())})}})},modalSubmit:function(e){var t=this;this.$Loading.start(),this.$refs[e].validate(function(a){if(a){var r=t.$qs.stringify({data:JSON.stringify(t.modalFormItem),token:\"123\"});\"add\"==t.modalFormItem.modalSubmitType?t.$axios.post(\"/admin-server/user/addUser\",r).then(function(a){200==a.data.code&&(t.$Notice.success({duration:5,desc:\"角色添加成功！\"}),t.refreshTable(),t.$refs[e].resetFields(),t.$Loading.finish()),500==a.data.code&&(t.$Modal.error({width:650,title:\"错误提示\",content:\"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \"+a.data.msg+\" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\"+a.data.data+\"</p>\"}),t.$Loading.error())}).catch(function(e){t.$Notice.error({title:\"错误提示\",duration:10,desc:e+\"<br/>无法获取后台数据！\"}),t.loading=!1}):\"edit\"==t.modalFormItem.modalSubmitType?t.$axios.post(\"/admin-server/user/updateUser\",r).then(function(a){200==a.data.code&&(t.$Notice.success({duration:5,desc:\"角色修改成功！\"}),t.refreshTable(),t.$refs[e].resetFields(),t.$Loading.finish()),500==a.data.code&&(t.$Modal.error({width:650,title:\"错误提示\",content:\"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \"+a.data.msg+\" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\"+a.data.data+\"</p>\"}),t.$Loading.error())}).catch(function(e){t.$Notice.error({title:\"错误提示\",duration:10,desc:e+\"<br/>无法获取后台数据！\"}),t.loading=!1}):t.$Message.error(\"Fail!  DATA ERROR!!!\")}else setTimeout(function(){t.modalLoading=!1,t.$nextTick(function(){t.modalLoading=!0})},1e3),t.$Message.error({content:\"请检查表单填写信息!\",duration:3})})},modalCancel:function(e){},resModalSubmit:function(){},updatePermission:function(e){var t=e.row.id;this.treedata.roleId=t,this.$refs.restree.findNodes(t),this.resourceModal=!0},selectionChange:function(e){0==e.length?this.canDelete=!0:e.length>=1&&(this.canDelete=!1),this.tableSelectData=e}},mounted:function(){this.$Loading.start(),this.init(),this.refreshTable(),this.$Loading.finish()}},p=m,h=Object(d[\"a\"])(p,r,o,!1,null,null,null);h.options.__file=\"rolemain.vue\";t[\"default\"]=h.exports}}]);","extractedComments":[]}