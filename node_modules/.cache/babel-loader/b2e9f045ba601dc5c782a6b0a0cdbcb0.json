{"remainingRequest":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vue_workspace\\iview-admin-11-7\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\iview-admin-11-7\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\iview-admin-11-7\\src\\view\\user-manager\\resourceinfo\\resourcemain.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\iview-admin-11-7\\src\\view\\user-manager\\resourceinfo\\resourcemain.vue","mtime":1541745258078},{"path":"D:\\vue_workspace\\iview-admin-11-7\\.babelrc","mtime":1541498101000},{"path":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1541557854009},{"path":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"userinfo-table\",\n  data: function data() {\n    return {\n      resourceDetail: {\n        pid: \"\",\n        id: \"\",\n        name: \"\",\n        url: \"\",\n        level: \"\",\n        status: 1,\n        descn: \"\"\n      },\n      statusList: [{\n        value: 0,\n        label: '不启用'\n      }, {\n        value: 1,\n        label: '正常'\n      }, {\n        value: 2,\n        label: '禁用'\n      }, {\n        value: 3,\n        label: '删除'\n      }],\n      treedata: [],\n      buttonShow: false,\n      formEditDisable: true,\n      EDButtonDisable: true\n    };\n  },\n  methods: {\n    selectChange: function selectChange(data) {\n      if (data.length > 0) {\n        this.EDButtonDisable = false;\n        this.resourceDetail = data[0];\n      } else {\n        this.resourceDetail = {\n          status: 1\n        };\n        this.EDButtonDisable = true;\n      }\n\n      this.buttonShow = false;\n      this.formEditDisable = true;\n    },\n    addDataButton: function addDataButton() {\n      var initData = {\n        status: 1\n      };\n      var selectData = this.$refs.treedata.getSelectedNodes();\n\n      if (selectData.length > 0) {\n        initData.pid = selectData[0].id;\n        initData.level = parseInt(selectData[0].level) + 1;\n      } else {\n        initData.pid = 0;\n        initData.level = 1;\n      }\n\n      console.log(initData);\n      this.resourceDetail = initData;\n      this.buttonShow = true;\n      this.formEditDisable = false;\n    },\n    editDataButton: function editDataButton() {\n      this.buttonShow = true;\n      this.formEditDisable = false;\n    },\n    deleteDataButton: function deleteDataButton() {\n      this.resourceDetail = {};\n      this.buttonShow = false;\n      this.formEditDisable = true;\n    },\n    saveData: function saveData() {\n      var _this = this;\n\n      var postData = this.$qs.stringify({\n        data: JSON.stringify(this.resourceDetail),\n        token: \"123\"\n      });\n      this.$axios.post(\"/admin-server/permission/addOrUpdatePermission\", postData).then(function (res) {\n        if (res.data.code == 200) {\n          _this.$Notice.success({\n            // title: '提示消息',\n            duration: 3,\n            desc: \"操作成功！\"\n          });\n\n          _this.refreshTable();\n\n          _this.$refs[name].resetFields();\n\n          _this.$Loading.finish();\n        }\n\n        if (res.data.code == 500) {\n          _this.$Modal.error({\n            width: 650,\n            title: \"错误提示\",\n            content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" + res.data.msg + \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" + res.data.data + \"</p>\"\n          });\n\n          _this.$Loading.error();\n        }\n      }).catch(function (error) {\n        _this.$Notice.error({\n          title: \"错误提示\",\n          duration: 5,\n          desc: error + \"<br/>无法获取后台数据！\"\n        });\n\n        _this.loading = false;\n      });\n    },\n    cancelSave: function cancelSave() {\n      this.buttonShow = false;\n      this.formEditDisable = true;\n      this.resourceDetail = {};\n    },\n    refreshTable: function refreshTable() {\n      this.EDButtonDisable = true;\n      this.resourceDetail = {};\n      this.initTreeData();\n    },\n    initTreeData: function initTreeData() {\n      var _this2 = this;\n\n      //获取后台节点\n      var data = {};\n      var token = \"123\";\n      this.$axios.get(\"/admin-server/permission/findPermissionTreeData\", {\n        params: {\n          token: token\n        }\n      }).then(function (res) {\n        if (res.data.code == 200) {\n          _this2.treedata = res.data.data;\n        } else {\n          _this2.$Notice.error({\n            title: \"错误提示\",\n            duration: 5,\n            desc: res + \"<br/>无法获取后台数据！\"\n          });\n        }\n      }).catch(function (error) {\n        _this2.$Notice.error({\n          title: \"错误提示\",\n          duration: 5,\n          desc: error + \"<br/>无法获取后台数据！\"\n        });\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.$Loading.start();\n    this.initTreeData();\n    this.$Loading.finish();\n  }\n};",null]}