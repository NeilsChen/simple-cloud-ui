{"remainingRequest":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\iview-admin-11-7\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\iview-admin-11-7\\src\\view\\user-manager\\roleinfo\\rolemain.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\iview-admin-11-7\\src\\view\\user-manager\\roleinfo\\rolemain.vue","mtime":1541562986327},{"path":"D:\\vue_workspace\\iview-admin-11-7\\.babelrc","mtime":1541498101000},{"path":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1541557854009},{"path":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"D:\\vue_workspace\\iview-admin-11-7\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport resourceTree from \"./resource-tree\";\nexport default {\n  name: \"roleinfo-table\",\n  components: {\n    resourceTree: resourceTree\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      tableColumn: [{\n        type: \"selection\",\n        width: 60,\n        align: \"center\",\n        fixed: \"left\"\n      }, {\n        type: \"ind\",\n        title: \"序号\",\n        width: 65,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"span\", params.index + (_this.pageInfo.currentPage - 1) * _this.pageInfo.pageSize + 1);\n        }\n      }, {\n        key: \"name\",\n        title: \"名称\",\n        align: \"center\",\n        width: 200\n      }, {\n        key: \"status\",\n        title: \"启用状态\",\n        align: \"center\",\n        width: 100,\n        render: function render(h, params) {\n          var texts = \"空值\";\n          var color = \"black\";\n\n          if (params.row.status == 0) {\n            texts = \"未启用\";\n            color = \"yellow\";\n          } else if (params.row.status == 1) {\n            texts = \"正常\";\n            color = \"green\";\n          } else if (params.row.status == 2) {\n            texts = \"禁用\";\n            color = \"red\";\n          } else if (params.row.status == 3) {\n            texts = \"删除\";\n            color = \"gray\";\n          } // return h('div',{props: {}},texts);\n\n\n          return h(\"Tag\", {\n            props: {\n              type: \"border\",\n              color: color\n            }\n          }, texts);\n        }\n      }, {\n        key: \"createTime\",\n        title: \"创建时间\",\n        align: \"center\",\n        width: 150,\n        render: function render(h, params) {\n          return h(\"div\", params.row.createTime == null ? \"\" : new Date(params.row.createTime).format(\"yyyy-MM-dd hh:mm:ss\"));\n        }\n      }, {\n        key: \"updateTime\",\n        title: \"最后更新时间\",\n        align: \"center\",\n        width: 150,\n        render: function render(h, params) {\n          return h(\"div\", params.row.updateTime == null ? \"\" : new Date(params.row.updateTime).format(\"yyyy-MM-dd hh:mm:ss\"));\n        }\n      }, {\n        key: \"descn\",\n        title: \"备注信息\",\n        align: \"center\",\n        width: 150\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        width: 200,\n        align: \"center\",\n        fixed: \"right\",\n        render: function render(h, params) {\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"primary\",\n              size: \"small\"\n            },\n            style: {\n              marginRight: \"5px\"\n            },\n            on: {\n              click: function click() {\n                _this.editUser(params);\n              }\n            }\n          }, \"修改\"), h(\"Button\", {\n            props: {\n              type: \"error\",\n              size: \"small\"\n            },\n            style: {\n              marginRight: \"5px\"\n            },\n            on: {\n              click: function click() {\n                _this.deleteUser(params, true);\n              }\n            }\n          }, \"删除\"), h(\"Button\", {\n            props: {\n              type: \"default\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.updatePermission(params);\n              }\n            }\n          }, \"关联资源\")]);\n        }\n      }],\n      tableData: [{\n        id: 1,\n        name: \"cs1\",\n        status: 1,\n        createTime: null,\n        updateTime: null,\n        descn: \"ccccsssss1\"\n      }, {\n        id: 2,\n        name: \"cs2\",\n        status: 2,\n        createTime: null,\n        updateTime: null,\n        descn: \"ccccsssss2\"\n      }],\n      searchData: {\n        name: \"\",\n        descn: \"\",\n        status: 1\n      },\n      pageInfo: {\n        totalPages: 0,\n        currentPage: 1,\n        pageSize: 10,\n        pageSizeOpt: [10, 20, 30, 50]\n      },\n      value1: [1, 2],\n      addModal: false,\n      resourceModal: false,\n      modalFormItem: {\n        modalTitle: \"\",\n        modalSubmitType: \"\",\n        id: \"\",\n        name: \"\",\n        status: 1,\n        descn: \"\"\n      },\n      formRuleValidate: {\n        name: [{\n          required: true,\n          message: \"名称不能为空\",\n          trigger: \"blur\"\n        }]\n      },\n      treedata: {\n        roleId: 0\n      },\n      loading: true,\n      modalLoading: true,\n      modalLoading2: true,\n      tableSelectData: [],\n      canDelete: true\n    };\n  },\n  methods: {\n    init: function init() {},\n    changePage: function changePage(page) {\n      this.pageInfo.currentPage = page;\n      this.refreshTable();\n    },\n    changeSize: function changeSize(size) {\n      this.pageInfo.pageSize = size;\n      this.refreshTable();\n    },\n    refreshTable: function refreshTable() {\n      var _this2 = this;\n\n      this.loading = true;\n      var data = {\n        name: this.searchData.name,\n        descn: this.searchData.descn,\n        status: this.searchData.status,\n        currentPage: this.pageInfo.currentPage,\n        pageSize: this.pageInfo.pageSize\n      };\n      var token = \"\";\n      this.$axios.get(\"/admin-server/role/findRolesWithPaging\", {\n        params: {\n          data: data,\n          token: token\n        }\n      }).then(function (res) {\n        _this2.pageInfo.totalPages = res.data.data.total;\n        _this2.tableData = res.data.data.list;\n        _this2.loading = false;\n      }).catch(function (error) {\n        _this2.$Notice.error({\n          title: \"错误提示\",\n          duration: 5,\n          desc: error + \"<br/>无法获取后台数据！\"\n        });\n\n        _this2.loading = false;\n      });\n    },\n    searchSubmit: function searchSubmit() {\n      this.refreshTable();\n    },\n    searchReset: function searchReset(name) {\n      this.$refs[name].resetFields();\n    },\n    //添加记录\n    addData: function addData() {\n      this.modalFormItem = {};\n      this.modalFormItem.gender = 1;\n      this.modalFormItem.status = 1;\n      this.modalFormItem.modalTitle = \"添加角色\";\n      this.modalFormItem.modalSubmitType = \"add\";\n      this.addModal = true;\n    },\n    //修改记录\n    editUser: function editUser(rowdata) {\n      this.modalFormItem = rowdata.row;\n      this.modalFormItem.modalTitle = \"修改角色\";\n      this.modalFormItem.modalSubmitType = \"edit\";\n      this.addModal = true;\n    },\n    //删除记录 \n    deleteData: function deleteData(data, isbatch) {\n      var _this3 = this;\n\n      if (isbatch) {\n        this.tableSelectData = [];\n        this.tableSelectData[0] = data.row;\n      }\n\n      if (this.tableSelectData.length > 0) {\n        this.$Modal.confirm({\n          title: \"提示\",\n          content: \"<h2>确定删除角色信息？</h2>\",\n          onOk: function onOk() {\n            var ids = new Array();\n\n            for (var i = 0; i < _this3.tableSelectData.length; i++) {\n              ids[i] = _this3.tableSelectData[i].id;\n            }\n\n            var postData = _this3.$qs.stringify({\n              data: JSON.stringify(ids),\n              token: \"123\"\n            });\n\n            _this3.$axios.post(\"/admin-server/role/deleteRole\", postData).then(function (res) {\n              if (res.data.code == 200) {\n                _this3.$Notice.success({\n                  // title: '提示消息',\n                  duration: 3,\n                  desc: \"删除角色成功！\"\n                });\n\n                _this3.refreshTable();\n\n                _this3.$Loading.finish();\n              }\n\n              if (res.data.code == 500) {\n                _this3.$Modal.error({\n                  width: 650,\n                  title: \"错误提示\",\n                  content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" + res.data.msg + \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" + res.data.data + \"</p>\"\n                });\n\n                _this3.$Loading.error();\n              }\n            });\n          }\n        });\n      }\n    },\n    //提交表单\n    modalSubmit: function modalSubmit(name) {\n      var _this4 = this;\n\n      this.$Loading.start();\n      this.$refs[name].validate(function (valid) {\n        if (valid) {\n          var postData = _this4.$qs.stringify({\n            data: JSON.stringify(_this4.modalFormItem),\n            token: \"123\"\n          }); //添加用户\n\n\n          if (_this4.modalFormItem.modalSubmitType == \"add\") {\n            _this4.$axios.post(\"/admin-server/user/addUser\", postData).then(function (res) {\n              if (res.data.code == 200) {\n                _this4.$Notice.success({\n                  // title: '提示消息',\n                  duration: 5,\n                  desc: \"角色添加成功！\"\n                });\n\n                _this4.refreshTable();\n\n                _this4.$refs[name].resetFields();\n\n                _this4.$Loading.finish();\n              }\n\n              if (res.data.code == 500) {\n                _this4.$Modal.error({\n                  width: 650,\n                  title: \"错误提示\",\n                  content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" + res.data.msg + \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" + res.data.data + \"</p>\"\n                });\n\n                _this4.$Loading.error();\n              }\n            }).catch(function (error) {\n              _this4.$Notice.error({\n                title: \"错误提示\",\n                duration: 10,\n                desc: error + \"<br/>无法获取后台数据！\"\n              });\n\n              _this4.loading = false;\n            }); //修改用户\n\n          } else if (_this4.modalFormItem.modalSubmitType == \"edit\") {\n            _this4.$axios.post(\"/admin-server/user/updateUser\", postData).then(function (res) {\n              if (res.data.code == 200) {\n                _this4.$Notice.success({\n                  // title: '提示消息',\n                  duration: 5,\n                  desc: \"角色修改成功！\"\n                });\n\n                _this4.refreshTable();\n\n                _this4.$refs[name].resetFields();\n\n                _this4.$Loading.finish();\n              }\n\n              if (res.data.code == 500) {\n                _this4.$Modal.error({\n                  width: 650,\n                  title: \"错误提示\",\n                  content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" + res.data.msg + \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" + res.data.data + \"</p>\"\n                });\n\n                _this4.$Loading.error();\n              }\n            }).catch(function (error) {\n              _this4.$Notice.error({\n                title: \"错误提示\",\n                duration: 10,\n                desc: error + \"<br/>无法获取后台数据！\"\n              });\n\n              _this4.loading = false;\n            });\n          } else {\n            _this4.$Message.error(\"Fail!  DATA ERROR!!!\");\n          }\n        } else {\n          setTimeout(function () {\n            _this4.modalLoading = false;\n\n            _this4.$nextTick(function () {\n              _this4.modalLoading = true;\n            });\n          }, 1000);\n\n          _this4.$Message.error({\n            content: '请检查表单填写信息!',\n            duration: 3\n          });\n        }\n      });\n    },\n    modalCancel: function modalCancel(name) {//this.$refs[name].resetFields();\n    },\n    resModalSubmit: function resModalSubmit() {},\n    //角色关联资源\n    updatePermission: function updatePermission(data) {\n      var roleid = data.row.id;\n      this.treedata.roleId = roleid;\n      this.$refs.restree.findNodes(roleid);\n      this.resourceModal = true;\n    },\n    selectionChange: function selectionChange(selection) {\n      if (selection.length == 0) {\n        this.canDelete = true;\n      } else if (selection.length >= 1) {\n        this.canDelete = false;\n      }\n\n      this.tableSelectData = selection;\n    }\n  },\n  mounted: function mounted() {\n    this.$Loading.start();\n    this.init();\n    this.refreshTable();\n    this.$Loading.finish();\n  }\n};",{"version":3,"sources":["rolemain.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA,OAAA,YAAA,MAAA,iBAAA;AAEA,eAAA;AACA,QAAA,gBADA;AAEA,cAAA;AACA;AADA,GAFA;AAKA,MALA,kBAKA;AAAA;;AACA,WAAA;AAEA,mBAAA,CAAA;AACA,cAAA,WADA;AAEA,eAAA,EAFA;AAGA,eAAA,QAHA;AAIA,eAAA;AAJA,OAAA,EAMA;AACA,cAAA,KADA;AAEA,eAAA,IAFA;AAGA,eAAA,EAHA;AAIA,eAAA,QAJA;AAKA,gBAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,EACA,MADA,EAEA,OAAA,KAAA,GACA,CAAA,MAAA,QAAA,CAAA,WAAA,GAAA,CAAA,IAAA,MAAA,QAAA,CAAA,QADA,GACA,CAHA,CAAA;AAKA;AAXA,OANA,EAmBA;AACA,aAAA,MADA;AAEA,eAAA,IAFA;AAGA,eAAA,QAHA;AAIA,eAAA;AAJA,OAnBA,EAyBA;AACA,aAAA,QADA;AAEA,eAAA,MAFA;AAGA,eAAA,QAHA;AAIA,eAAA,GAJA;AAKA,gBAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,cAAA,QAAA,IAAA;AACA,cAAA,QAAA,OAAA;;AACA,cAAA,OAAA,GAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,oBAAA,KAAA;AACA,oBAAA,QAAA;AACA,WAHA,MAGA,IAAA,OAAA,GAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,oBAAA,IAAA;AACA,oBAAA,OAAA;AACA,WAHA,MAGA,IAAA,OAAA,GAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,oBAAA,IAAA;AACA,oBAAA,KAAA;AACA,WAHA,MAGA,IAAA,OAAA,GAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,oBAAA,IAAA;AACA,oBAAA,MAAA;AACA,WAfA,CAgBA;;;AACA,iBAAA,EACA,KADA,EACA;AACA,mBAAA;AACA,oBAAA,QADA;AAEA,qBAAA;AAFA;AADA,WADA,EAOA,KAPA,CAAA;AASA;AA/BA,OAzBA,EA0DA;AACA,aAAA,YADA;AAEA,eAAA,MAFA;AAGA,eAAA,QAHA;AAIA,eAAA,GAJA;AAKA,gBAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,EACA,KADA,EAEA,OAAA,GAAA,CAAA,UAAA,IAAA,IAAA,GACA,EADA,GAEA,IAAA,IAAA,CAAA,OAAA,GAAA,CAAA,UAAA,EAAA,MAAA,CAAA,qBAAA,CAJA,CAAA;AAMA;AAZA,OA1DA,EAwEA;AACA,aAAA,YADA;AAEA,eAAA,QAFA;AAGA,eAAA,QAHA;AAIA,eAAA,GAJA;AAKA,gBAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,EACA,KADA,EAEA,OAAA,GAAA,CAAA,UAAA,IAAA,IAAA,GACA,EADA,GAEA,IAAA,IAAA,CAAA,OAAA,GAAA,CAAA,UAAA,EAAA,MAAA,CAAA,qBAAA,CAJA,CAAA;AAMA;AAZA,OAxEA,EAsFA;AACA,aAAA,OADA;AAEA,eAAA,MAFA;AAGA,eAAA,QAHA;AAIA,eAAA;AAJA,OAtFA,EA4FA;AACA,eAAA,IADA;AAEA,aAAA,QAFA;AAGA,eAAA,GAHA;AAIA,eAAA,QAJA;AAKA,eAAA,OALA;AAMA,gBAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,EAAA,KAAA,EAAA,CACA,EACA,QADA,EACA;AACA,mBAAA;AACA,oBAAA,SADA;AAEA,oBAAA;AAFA,aADA;AAKA,mBAAA;AACA,2BAAA;AADA,aALA;AAQA,gBAAA;AACA,qBAAA,iBAAA;AACA,sBAAA,QAAA,CAAA,MAAA;AACA;AAHA;AARA,WADA,EAeA,IAfA,CADA,EAkBA,EACA,QADA,EACA;AACA,mBAAA;AACA,oBAAA,OADA;AAEA,oBAAA;AAFA,aADA;AAKA,mBAAA;AACA,2BAAA;AADA,aALA;AAQA,gBAAA;AACA,qBAAA,iBAAA;AACA,sBAAA,UAAA,CAAA,MAAA,EAAA,IAAA;AACA;AAHA;AARA,WADA,EAeA,IAfA,CAlBA,EAmCA,EACA,QADA,EACA;AACA,mBAAA;AACA,oBAAA,SADA;AAEA,oBAAA;AAFA,aADA;AAKA,gBAAA;AACA,qBAAA,iBAAA;AACA,sBAAA,gBAAA,CAAA,MAAA;AACA;AAHA;AALA,WADA,EAYA,MAZA,CAnCA,CAAA,CAAA;AAkDA;AAzDA,OA5FA,CAFA;AA2JA,iBAAA,CACA;AACA,YAAA,CADA;AAEA,cAAA,KAFA;AAGA,gBAAA,CAHA;AAIA,oBAAA,IAJA;AAKA,oBAAA,IALA;AAMA,eAAA;AANA,OADA,EAQA;AACA,YAAA,CADA;AAEA,cAAA,KAFA;AAGA,gBAAA,CAHA;AAIA,oBAAA,IAJA;AAKA,oBAAA,IALA;AAMA,eAAA;AANA,OARA,CA3JA;AA6KA,kBAAA;AACA,cAAA,EADA;AAEA,eAAA,EAFA;AAGA,gBAAA;AAHA,OA7KA;AAmLA,gBAAA;AACA,oBAAA,CADA;AAEA,qBAAA,CAFA;AAGA,kBAAA,EAHA;AAIA,qBAAA,CAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA;AAJA,OAnLA;AAyLA,cAAA,CAAA,CAAA,EAAA,CAAA,CAzLA;AA2LA,gBAAA,KA3LA;AA4LA,qBAAA,KA5LA;AA8LA,qBAAA;AACA,oBAAA,EADA;AAEA,yBAAA,EAFA;AAGA,YAAA,EAHA;AAIA,cAAA,EAJA;AAKA,gBAAA,CALA;AAMA,eAAA;AANA,OA9LA;AAuMA,wBAAA;AACA,cAAA,CACA;AAAA,oBAAA,IAAA;AAAA,mBAAA,QAAA;AAAA,mBAAA;AAAA,SADA;AADA,OAvMA;AA6MA,gBAAA;AACA,gBAAA;AADA,OA7MA;AAiNA,eAAA,IAjNA;AAkNA,oBAAA,IAlNA;AAmNA,qBAAA,IAnNA;AAoNA,uBAAA,EApNA;AAqNA,iBAAA;AArNA,KAAA;AAuNA,GA7NA;AA8NA,WAAA;AACA,QADA,kBACA,CAEA,CAHA;AAIA,cAJA,sBAIA,IAJA,EAIA;AACA,WAAA,QAAA,CAAA,WAAA,GAAA,IAAA;AACA,WAAA,YAAA;AACA,KAPA;AAQA,cARA,sBAQA,IARA,EAQA;AACA,WAAA,QAAA,CAAA,QAAA,GAAA,IAAA;AACA,WAAA,YAAA;AACA,KAXA;AAYA,gBAZA,0BAYA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,UAAA,OAAA;AACA,cAAA,KAAA,UAAA,CAAA,IADA;AAEA,eAAA,KAAA,UAAA,CAAA,KAFA;AAGA,gBAAA,KAAA,UAAA,CAAA,MAHA;AAIA,qBAAA,KAAA,QAAA,CAAA,WAJA;AAKA,kBAAA,KAAA,QAAA,CAAA;AALA,OAAA;AAOA,UAAA,QAAA,EAAA;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,wCAAA,EAAA;AACA,gBAAA;AAAA,gBAAA,IAAA;AAAA,iBAAA;AAAA;AADA,OAAA,EAGA,IAHA,CAGA,eAAA;AACA,eAAA,QAAA,CAAA,UAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AAEA,eAAA,SAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AAEA,eAAA,OAAA,GAAA,KAAA;AACA,OATA,EAUA,KAVA,CAUA,iBAAA;AACA,eAAA,OAAA,CAAA,KAAA,CAAA;AACA,iBAAA,MADA;AAEA,oBAAA,CAFA;AAGA,gBAAA,QAAA;AAHA,SAAA;;AAMA,eAAA,OAAA,GAAA,KAAA;AACA,OAlBA;AAmBA,KAzCA;AA2CA,gBA3CA,0BA2CA;AACA,WAAA,YAAA;AACA,KA7CA;AA8CA,eA9CA,uBA8CA,IA9CA,EA8CA;AACA,WAAA,KAAA,CAAA,IAAA,EAAA,WAAA;AACA,KAhDA;AAkDA;AACA,WAnDA,qBAmDA;AACA,WAAA,aAAA,GAAA,EAAA;AACA,WAAA,aAAA,CAAA,MAAA,GAAA,CAAA;AACA,WAAA,aAAA,CAAA,MAAA,GAAA,CAAA;AACA,WAAA,aAAA,CAAA,UAAA,GAAA,MAAA;AACA,WAAA,aAAA,CAAA,eAAA,GAAA,KAAA;AAEA,WAAA,QAAA,GAAA,IAAA;AACA,KA3DA;AA4DA;AACA,YA7DA,oBA6DA,OA7DA,EA6DA;AACA,WAAA,aAAA,GAAA,QAAA,GAAA;AAEA,WAAA,aAAA,CAAA,UAAA,GAAA,MAAA;AACA,WAAA,aAAA,CAAA,eAAA,GAAA,MAAA;AACA,WAAA,QAAA,GAAA,IAAA;AACA,KAnEA;AAoEA;AACA,cArEA,sBAqEA,IArEA,EAqEA,OArEA,EAqEA;AAAA;;AACA,UAAA,OAAA,EAAA;AACA,aAAA,eAAA,GAAA,EAAA;AACA,aAAA,eAAA,CAAA,CAAA,IAAA,KAAA,GAAA;AACA;;AACA,UAAA,KAAA,eAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,OAAA,CAAA;AACA,iBAAA,IADA;AAEA,mBAAA,oBAFA;AAGA,gBAAA,gBAAA;AACA,gBAAA,MAAA,IAAA,KAAA,EAAA;;AACA,iBAAA,IAAA,IAAA,CAAA,EAAA,IAAA,OAAA,eAAA,CAAA,MAAA,EAAA,GAAA,EAAA;AACA,kBAAA,CAAA,IAAA,OAAA,eAAA,CAAA,CAAA,EAAA,EAAA;AACA;;AAEA,gBAAA,WAAA,OAAA,GAAA,CAAA,SAAA,CAAA;AACA,oBAAA,KAAA,SAAA,CAAA,GAAA,CADA;AAEA,qBAAA;AAFA,aAAA,CAAA;;AAKA,mBAAA,MAAA,CACA,IADA,CACA,+BADA,EACA,QADA,EAEA,IAFA,CAEA,eAAA;AACA,kBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,uBAAA,OAAA,CAAA,OAAA,CAAA;AACA;AACA,4BAAA,CAFA;AAGA,wBAAA;AAHA,iBAAA;;AAKA,uBAAA,YAAA;;AACA,uBAAA,QAAA,CAAA,MAAA;AACA;;AACA,kBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,uBAAA,MAAA,CAAA,KAAA,CAAA;AACA,yBAAA,GADA;AAEA,yBAAA,MAFA;AAGA,2BAAA,sGACA,IAAA,IAAA,CAAA,GADA,GAEA,+EAFA,GAGA,IAAA,IAAA,CAAA,IAHA,GAIA;AAPA,iBAAA;;AASA,uBAAA,QAAA,CAAA,KAAA;AACA;AACA,aAxBA;AAyBA;AAvCA,SAAA;AAyCA;AACA,KArHA;AAsHA;AACA,eAvHA,uBAuHA,IAvHA,EAuHA;AAAA;;AAEA,WAAA,QAAA,CAAA,KAAA;AACA,WAAA,KAAA,CAAA,IAAA,EAAA,QAAA,CAAA,iBAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,WAAA,OAAA,GAAA,CAAA,SAAA,CAAA;AACA,kBAAA,KAAA,SAAA,CAAA,OAAA,aAAA,CADA;AAEA,mBAAA;AAFA,WAAA,CAAA,CADA,CAMA;;;AACA,cAAA,OAAA,aAAA,CAAA,eAAA,IAAA,KAAA,EAAA;AACA,mBAAA,MAAA,CACA,IADA,CACA,4BADA,EACA,QADA,EAEA,IAFA,CAEA,eAAA;AACA,kBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,uBAAA,OAAA,CAAA,OAAA,CAAA;AACA;AACA,4BAAA,CAFA;AAGA,wBAAA;AAHA,iBAAA;;AAKA,uBAAA,YAAA;;AACA,uBAAA,KAAA,CAAA,IAAA,EAAA,WAAA;;AACA,uBAAA,QAAA,CAAA,MAAA;AACA;;AACA,kBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,uBAAA,MAAA,CAAA,KAAA,CAAA;AACA,yBAAA,GADA;AAEA,yBAAA,MAFA;AAGA,2BAAA,sGACA,IAAA,IAAA,CAAA,GADA,GAEA,+EAFA,GAGA,IAAA,IAAA,CAAA,IAHA,GAIA;AAPA,iBAAA;;AASA,uBAAA,QAAA,CAAA,KAAA;AACA;AACA,aAzBA,EA0BA,KA1BA,CA0BA,iBAAA;AACA,qBAAA,OAAA,CAAA,KAAA,CAAA;AACA,uBAAA,MADA;AAEA,0BAAA,EAFA;AAGA,sBAAA,QAAA;AAHA,eAAA;;AAMA,qBAAA,OAAA,GAAA,KAAA;AACA,aAlCA,EADA,CAqCA;;AACA,WAtCA,MAsCA,IAAA,OAAA,aAAA,CAAA,eAAA,IAAA,MAAA,EAAA;AACA,mBAAA,MAAA,CACA,IADA,CACA,+BADA,EACA,QADA,EAEA,IAFA,CAEA,eAAA;AACA,kBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,uBAAA,OAAA,CAAA,OAAA,CAAA;AACA;AACA,4BAAA,CAFA;AAGA,wBAAA;AAHA,iBAAA;;AAKA,uBAAA,YAAA;;AACA,uBAAA,KAAA,CAAA,IAAA,EAAA,WAAA;;AACA,uBAAA,QAAA,CAAA,MAAA;AACA;;AACA,kBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,uBAAA,MAAA,CAAA,KAAA,CAAA;AACA,yBAAA,GADA;AAEA,yBAAA,MAFA;AAGA,2BAAA,sGACA,IAAA,IAAA,CAAA,GADA,GAEA,+EAFA,GAGA,IAAA,IAAA,CAAA,IAHA,GAGA;AANA,iBAAA;;AAQA,uBAAA,QAAA,CAAA,KAAA;AACA;AACA,aAxBA,EAyBA,KAzBA,CAyBA,iBAAA;AACA,qBAAA,OAAA,CAAA,KAAA,CAAA;AACA,uBAAA,MADA;AAEA,0BAAA,EAFA;AAGA,sBAAA,QAAA;AAHA,eAAA;;AAKA,qBAAA,OAAA,GAAA,KAAA;AACA,aAhCA;AAiCA,WAlCA,MAkCA;AACA,mBAAA,QAAA,CAAA,KAAA,CAAA,sBAAA;AACA;AACA,SAlFA,MAkFA;AACA,qBAAA,YAAA;AACA,mBAAA,YAAA,GAAA,KAAA;;AACA,mBAAA,SAAA,CAAA,YAAA;AACA,qBAAA,YAAA,GAAA,IAAA;AACA,aAFA;AAGA,WALA,EAKA,IALA;;AAMA,iBAAA,QAAA,CAAA,KAAA,CAAA;AACA,qBAAA,YADA;AAEA,sBAAA;AAFA,WAAA;AAIA;AACA,OA/FA;AAgGA,KA1NA;AA2NA,eA3NA,uBA2NA,IA3NA,EA2NA,CACA;AACA,KA7NA;AA+NA,kBA/NA,4BA+NA,CAEA,CAjOA;AAmOA;AACA,oBApOA,4BAoOA,IApOA,EAoOA;AACA,UAAA,SAAA,KAAA,GAAA,CAAA,EAAA;AACA,WAAA,QAAA,CAAA,MAAA,GAAA,MAAA;AACA,WAAA,KAAA,CAAA,OAAA,CAAA,SAAA,CAAA,MAAA;AACA,WAAA,aAAA,GAAA,IAAA;AAEA,KA1OA;AA4OA,mBA5OA,2BA4OA,SA5OA,EA4OA;AACA,UAAA,UAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,SAAA,GAAA,IAAA;AACA,OAFA,MAEA,IAAA,UAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,SAAA,GAAA,KAAA;AACA;;AACA,WAAA,eAAA,GAAA,SAAA;AACA;AAnPA,GA9NA;AAmdA,SAndA,qBAmdA;AACA,SAAA,QAAA,CAAA,KAAA;AACA,SAAA,IAAA;AACA,SAAA,YAAA;AACA,SAAA,QAAA,CAAA,MAAA;AACA;AAxdA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <Row>\r\n      <Col span=\"24\">\r\n      <Card :dis-hover=\"true\">\r\n        <p slot=\"title\">\r\n          <Icon type=\"md-people\"></Icon>\r\n          角色列表\r\n        </p>\r\n        <Card style=\"padding-top:20px;\" :padding=\"0\">\r\n          <Form ref=\"searchData\" :model=\"searchData\" :rules=\"searchData\" style=\"margin:0px\" inline>\r\n            <FormItem label=\"名称\" prop=\"name\" :label-width=50>\r\n              <Input type=\"text\" v-model=\"searchData.name\" placeholder=\"名称\"  />\r\n            </FormItem>\r\n            <FormItem label=\"备注信息\" prop=\"descn\" :label-width=70>\r\n              <Input v-model=\"searchData.descn\" placeholder=\"备注信息\" />\r\n            </FormItem>\r\n            <FormItem label=\"状态\" prop=\"status\" :label-width=50>\r\n              <Select v-model=\"searchData.status\" clearable style=\"width:70px\">\r\n                <Option value='0'>不启用</Option>\r\n                <Option value='1' checked>正常</Option>\r\n                <Option value='2'>禁用</Option>\r\n                <Option value='3'>删除</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <span style=\"padding-left:50px;\" />\r\n            <FormItem>\r\n              <Button type=\"primary\" @click=\"searchSubmit\" icon=\"md-search\">搜索</Button>\r\n            </FormItem>\r\n            <FormItem>\r\n              <Button @click=\"searchReset('searchData')\" icon=\"md-refresh\">重置</Button>\r\n            </FormItem>\r\n          </Form>\r\n        </Card>\r\n        <Card style=\"margin-top:10px;\">\r\n          <Row type=\"flex\" justify=\"start\">\r\n            <ButtonGroup size=\"large\">\r\n              <Button icon=\"md-add\" @click=\"addData\">添加</Button>\r\n              <Button icon=\"md-close\" @click=\"deleteData\" :disabled=\"canDelete\">删除</Button>\r\n              \r\n            </ButtonGroup>\r\n            <span style=\"margin-left:10px;\" />\r\n            <ButtonGroup size=\"large\">\r\n              <Button icon=\"md-refresh\" @click=\"refreshTable\">刷新</Button>\r\n              <!-- <Button  icon=\"md-reorder\" @click=\"tableSelectData\">显示列</Button> -->\r\n            </ButtonGroup>\r\n          </Row>\r\n        </Card>\r\n        <Card style=\"margin-top:10px;\" :padding=\"0\" :bordered=\"false\">\r\n          <Row>\r\n            <Table height=\"520\" :loading=\"loading\" :columns=\"tableColumn\" :data=\"tableData\" border stripe @on-selection-change=\"selectionChange\"></Table>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Page style=\"margin:10px;\" :total=\"pageInfo.totalPages\" :current=\"pageInfo.currentPage\" :page-size=\"pageInfo.pageSize\" :page-size-opts=\"pageInfo.pageSizeOpt\" @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-elevator show-sizer show-total placement=\"top\"></Page>\r\n          </Row>\r\n        </Card>\r\n      </Card>\r\n      </Col>\r\n    </Row>\r\n    <Modal :title=\"modalFormItem.modalTitle\" v-model=\"addModal\" :closable=\"false\" :mask-closable=\"false\" :loading=\"modalLoading\" ok-text=\"提交\" cancel-text=\"取消\" @on-ok=\"modalSubmit('modalFormItem')\" @on-cancel=\"modalCancel('modalFormItem')\">\r\n      <Form ref=\"modalFormItem\" :model=\"modalFormItem\" :rules=\"formRuleValidate\" :label-width=80>\r\n        <FormItem label=\"名称\" prop=\"name\">\r\n          <Input v-model=\"modalFormItem.name\" placeholder=\"名称...\" />\r\n        </FormItem>\r\n        <FormItem label=\"用户状态\" prop=\"status\">\r\n          <Select v-model=\"modalFormItem.status\">\r\n            <Option value='0'>不启用</Option>\r\n            <Option value='1'>正常</Option>\r\n            <Option value='2'>禁用</Option>\r\n            <Option value='3' disabled>删除</Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"备注\" prop=\"descn\">\r\n          <Input v-model=\"modalFormItem.descn\" type=\"textarea\" :autosize=\"{minRows: 2,maxRows: 5}\" placeholder=\"备注信息...\" />\r\n        </FormItem>\r\n      </Form>\r\n    </Modal>\r\n\r\n    <Modal title=\"关联资源\" v-model=\"resourceModal\" :closable=\"false\" :mask-closable=\"false\" :loading=\"modalLoading2\" ok-text=\"提交\" cancel-text=\"取消\" @on-ok=\"resModalSubmit()\" @on-cancel=\"modalCancel()\" width=600>\r\n        <resource-tree ref=\"restree\" :roleId=\"treedata.roleId\"></resource-tree>\r\n    </Modal>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport resourceTree from \"./resource-tree\"\r\n\r\nexport default {\r\n  name: \"roleinfo-table\",\r\n  components: {\r\n    resourceTree\r\n  },\r\n  data() {\r\n    return {\r\n\r\n      tableColumn: [{\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n          fixed: \"left\"\r\n        },\r\n        {\r\n          type: \"ind\",\r\n          title: \"序号\",\r\n          width: 65,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return h(\r\n              \"span\",\r\n              params.index +\r\n              (this.pageInfo.currentPage - 1) * this.pageInfo.pageSize + 1\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"name\",\r\n          title: \"名称\",\r\n          align: \"center\",\r\n          width: 200\r\n        },\r\n        {\r\n          key: \"status\",\r\n          title: \"启用状态\",\r\n          align: \"center\",\r\n          width: 100,\r\n          render: (h, params) => {\r\n            let texts = \"空值\";\r\n            let color = \"black\";\r\n            if (params.row.status == 0) {\r\n              texts = \"未启用\";\r\n              color = \"yellow\";\r\n            } else if (params.row.status == 1) {\r\n              texts = \"正常\";\r\n              color = \"green\";\r\n            } else if (params.row.status == 2) {\r\n              texts = \"禁用\";\r\n              color = \"red\";\r\n            } else if (params.row.status == 3) {\r\n              texts = \"删除\";\r\n              color = \"gray\";\r\n            }\r\n            // return h('div',{props: {}},texts);\r\n            return h(\r\n              \"Tag\", {\r\n                props: {\r\n                  type: \"border\",\r\n                  color: color\r\n                }\r\n              },\r\n              texts\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"createTime\",\r\n          title: \"创建时间\",\r\n          align: \"center\",\r\n          width: 150,\r\n          render: function(h, params) {\r\n            return h(\r\n              \"div\",\r\n              params.row.createTime == null ?\r\n              \"\" :\r\n              new Date(params.row.createTime).format(\"yyyy-MM-dd hh:mm:ss\")\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"updateTime\",\r\n          title: \"最后更新时间\",\r\n          align: \"center\",\r\n          width: 150,\r\n          render: function(h, params) {\r\n            return h(\r\n              \"div\",\r\n              params.row.updateTime == null ?\r\n              \"\" :\r\n              new Date(params.row.updateTime).format(\"yyyy-MM-dd hh:mm:ss\")\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"descn\",\r\n          title: \"备注信息\",\r\n          align: \"center\",\r\n          width: 150\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          width: 200,\r\n          align: \"center\",\r\n          fixed: \"right\",\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              h(\r\n                \"Button\", {\r\n                  props: {\r\n                    type: \"primary\",\r\n                    size: \"small\"\r\n                  },\r\n                  style: {\r\n                    marginRight: \"5px\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.editUser(params);\r\n                    }\r\n                  }\r\n                },\r\n                \"修改\"\r\n              ),\r\n              h(\r\n                \"Button\", {\r\n                  props: {\r\n                    type: \"error\",\r\n                    size: \"small\"\r\n                  },\r\n                   style: {\r\n                    marginRight: \"5px\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.deleteUser(params, true);\r\n                    }\r\n                  }\r\n                },\r\n                \"删除\"\r\n              ),\r\n              h(\r\n                \"Button\", {\r\n                  props: {\r\n                    type: \"default\",\r\n                    size: \"small\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.updatePermission(params);\r\n                    }\r\n                  }\r\n                },\r\n                \"关联资源\"\r\n              )\r\n            ]);\r\n          }\r\n        }\r\n      ],\r\n\r\n      tableData: [\r\n        {\r\n          id:1,\r\n          name:\"cs1\",\r\n          status:1,\r\n          createTime:null,\r\n          updateTime:null,\r\n          descn:\"ccccsssss1\"\r\n        },{\r\n          id:2,\r\n          name:\"cs2\",\r\n          status:2,\r\n          createTime:null,\r\n          updateTime:null,\r\n          descn:\"ccccsssss2\"\r\n        }\r\n      ],\r\n\r\n      searchData: {\r\n        name: \"\",\r\n        descn: \"\",\r\n        status: 1\r\n      },\r\n\r\n      pageInfo: {\r\n        totalPages: 0,\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        pageSizeOpt: [10, 20, 30, 50]\r\n      },\r\n      value1: [1, 2],\r\n\r\n      addModal: false,\r\n      resourceModal:false,\r\n\r\n      modalFormItem: {\r\n        modalTitle: \"\",\r\n        modalSubmitType: \"\",\r\n        id: \"\",\r\n        name: \"\",\r\n        status: 1,\r\n        descn: \"\"\r\n      },\r\n\r\n      formRuleValidate: {\r\n        name: [\r\n          { required: true, message: \"名称不能为空\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n\r\n      treedata:{\r\n        roleId:0\r\n      },\r\n\r\n      loading: true,\r\n      modalLoading: true,\r\n      modalLoading2:true,\r\n      tableSelectData: [],\r\n      canDelete: true\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n\r\n    },\r\n    changePage(page) {\r\n      this.pageInfo.currentPage = page;\r\n      this.refreshTable();\r\n    },\r\n    changeSize(size) {\r\n      this.pageInfo.pageSize = size;\r\n      this.refreshTable();\r\n    },\r\n    refreshTable() {\r\n      this.loading = true;\r\n      var data = {\r\n        name: this.searchData.name,\r\n        descn: this.searchData.descn,\r\n        status: this.searchData.status,\r\n        currentPage: this.pageInfo.currentPage,\r\n        pageSize: this.pageInfo.pageSize\r\n      };\r\n      var token = \"\";\r\n      this.$axios.get(\"/admin-server/role/findRolesWithPaging\", {\r\n          params: { data: data, token: token }\r\n        })\r\n        .then(res => {\r\n          this.pageInfo.totalPages = res.data.data.total;\r\n\r\n          this.tableData = res.data.data.list;\r\n\r\n          this.loading = false;\r\n        })\r\n        .catch(error => {\r\n          this.$Notice.error({\r\n            title: \"错误提示\",\r\n            duration: 5,\r\n            desc: error + \"<br/>无法获取后台数据！\"\r\n          });\r\n\r\n          this.loading = false;\r\n        });\r\n    },\r\n\r\n    searchSubmit() {\r\n      this.refreshTable();\r\n    },\r\n    searchReset(name) {\r\n      this.$refs[name].resetFields();\r\n    },\r\n\r\n    //添加记录\r\n    addData() {\r\n      this.modalFormItem = {};\r\n      this.modalFormItem.gender = 1;\r\n      this.modalFormItem.status = 1;\r\n      this.modalFormItem.modalTitle = \"添加角色\";\r\n      this.modalFormItem.modalSubmitType = \"add\";\r\n \r\n      this.addModal = true;\r\n    },\r\n    //修改记录\r\n    editUser(rowdata) {\r\n      this.modalFormItem = rowdata.row;\r\n\r\n      this.modalFormItem.modalTitle = \"修改角色\";\r\n      this.modalFormItem.modalSubmitType = \"edit\";\r\n      this.addModal = true;\r\n    },\r\n    //删除记录 \r\n    deleteData(data, isbatch) {\r\n      if (isbatch) {\r\n        this.tableSelectData = [];\r\n        this.tableSelectData[0] = data.row;\r\n      }\r\n      if (this.tableSelectData.length > 0) {\r\n        this.$Modal.confirm({\r\n          title: \"提示\",\r\n          content: \"<h2>确定删除角色信息？</h2>\",\r\n          onOk: () => {\r\n            let ids = new Array();\r\n            for (var i = 0; i < this.tableSelectData.length; i++) {\r\n              ids[i] = this.tableSelectData[i].id;\r\n            }\r\n\r\n            let postData = this.$qs.stringify({\r\n              data: JSON.stringify(ids),\r\n              token: \"123\"\r\n            });\r\n\r\n            this.$axios\r\n              .post(\"/admin-server/role/deleteRole\", postData)\r\n              .then(res => {\r\n                if (res.data.code == 200) {\r\n                  this.$Notice.success({\r\n                    // title: '提示消息',\r\n                    duration: 3,\r\n                    desc: \"删除角色成功！\"\r\n                  });\r\n                  this.refreshTable();\r\n                  this.$Loading.finish();\r\n                }\r\n                if (res.data.code == 500) {\r\n                  this.$Modal.error({\r\n                    width: 650,\r\n                    title: \"错误提示\",\r\n                    content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" +\r\n                      res.data.msg +\r\n                      \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" +\r\n                      res.data.data +\r\n                      \"</p>\"\r\n                  });\r\n                  this.$Loading.error();\r\n                }\r\n              });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    //提交表单\r\n    modalSubmit(name) {\r\n\r\n      this.$Loading.start();\r\n      this.$refs[name].validate(valid => {\r\n        if (valid) {\r\n          let postData = this.$qs.stringify({\r\n            data: JSON.stringify(this.modalFormItem),\r\n            token: \"123\"\r\n          });\r\n\r\n          //添加用户\r\n          if (this.modalFormItem.modalSubmitType == \"add\") {\r\n            this.$axios\r\n              .post(\"/admin-server/user/addUser\", postData)\r\n              .then(res => {\r\n                if (res.data.code == 200) {\r\n                  this.$Notice.success({\r\n                    // title: '提示消息',\r\n                    duration: 5,\r\n                    desc: \"角色添加成功！\"\r\n                  });\r\n                  this.refreshTable();\r\n                  this.$refs[name].resetFields();\r\n                  this.$Loading.finish();\r\n                }\r\n                if (res.data.code == 500) {\r\n                  this.$Modal.error({\r\n                    width: 650,\r\n                    title: \"错误提示\",\r\n                    content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" +\r\n                      res.data.msg +\r\n                      \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" +\r\n                      res.data.data +\r\n                      \"</p>\"\r\n                  });\r\n                  this.$Loading.error();\r\n                }\r\n              })\r\n              .catch(error => {\r\n                this.$Notice.error({\r\n                  title: \"错误提示\",\r\n                  duration: 10,\r\n                  desc: error + \"<br/>无法获取后台数据！\"\r\n                });\r\n\r\n                this.loading = false;\r\n              });\r\n\r\n            //修改用户\r\n          } else if (this.modalFormItem.modalSubmitType == \"edit\") {\r\n            this.$axios\r\n              .post(\"/admin-server/user/updateUser\", postData)\r\n              .then(res => {\r\n                if (res.data.code == 200) {\r\n                  this.$Notice.success({\r\n                    // title: '提示消息',\r\n                    duration: 5,\r\n                    desc: \"角色修改成功！\"\r\n                  });\r\n                  this.refreshTable();\r\n                  this.$refs[name].resetFields();\r\n                  this.$Loading.finish();\r\n                }\r\n                if (res.data.code == 500) {\r\n                  this.$Modal.error({\r\n                    width: 650,\r\n                    title: \"错误提示\",\r\n                    content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" +\r\n                      res.data.msg +\r\n                      \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" +\r\n                      res.data.data + \"</p>\"\r\n                  });\r\n                  this.$Loading.error();\r\n                }\r\n              })\r\n              .catch(error => {\r\n                this.$Notice.error({\r\n                  title: \"错误提示\",\r\n                  duration: 10,\r\n                  desc: error + \"<br/>无法获取后台数据！\"\r\n                });\r\n                this.loading = false;\r\n              });\r\n          } else {\r\n            this.$Message.error(\"Fail!  DATA ERROR!!!\");\r\n          }\r\n        } else {\r\n          setTimeout(() => {\r\n            this.modalLoading = false;\r\n            this.$nextTick(() => {\r\n              this.modalLoading = true;\r\n            });\r\n          }, 1000);\r\n          this.$Message.error({\r\n            content:'请检查表单填写信息!',\r\n            duration:3\r\n          });\r\n        }\r\n      });\r\n    },\r\n    modalCancel(name) {\r\n      //this.$refs[name].resetFields();\r\n    },\r\n\r\n    resModalSubmit(){\r\n\r\n    },\r\n\r\n    //角色关联资源\r\n    updatePermission(data){\r\n      var roleid = data.row.id;\r\n      this.treedata.roleId=roleid;\r\n      this.$refs.restree.findNodes(roleid);\r\n      this.resourceModal=true;\r\n\r\n    },\r\n\r\n    selectionChange(selection) {\r\n      if (selection.length == 0) {\r\n        this.canDelete = true;\r\n      } else if (selection.length >= 1) {\r\n        this.canDelete = false;\r\n      }\r\n      this.tableSelectData = selection;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$Loading.start();\r\n    this.init();\r\n    this.refreshTable();\r\n    this.$Loading.finish();\r\n  }\r\n};\r\n\r\n</script>\r\n"],"sourceRoot":"src\\view\\user-manager\\roleinfo"}]}