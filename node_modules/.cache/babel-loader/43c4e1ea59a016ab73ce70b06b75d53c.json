{"remainingRequest":"D:\\vue_workspace\\simple-cloud-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\simple-cloud-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\simple-cloud-ui\\src\\view\\user-manager\\userinfo\\usermain.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\simple-cloud-ui\\src\\view\\user-manager\\userinfo\\usermain.vue","mtime":1542278153855},{"path":"D:\\vue_workspace\\simple-cloud-ui\\.babelrc","mtime":1541498101000},{"path":"D:\\vue_workspace\\simple-cloud-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1541557854009},{"path":"D:\\vue_workspace\\simple-cloud-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"D:\\vue_workspace\\simple-cloud-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { axFindUsersWithPaging, axAddUser, axUpdateUser, axDeleteUser } from '@/api/userinfo';\nimport { axFindAllRoles } from '@/api/roleinfo';\nexport default {\n  name: \"userinfo-table\",\n  data: function data() {\n    var _this = this;\n\n    return {\n      userColumn: [{\n        type: \"selection\",\n        width: 60,\n        align: \"center\",\n        fixed: \"left\"\n      }, {\n        type: \"ind\",\n        title: \"序号\",\n        width: 65,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"span\", params.index + (_this.pageInfo.currentPage - 1) * _this.pageInfo.pageSize + 1);\n        }\n      }, {\n        key: \"username\",\n        title: \"帐号\",\n        align: \"center\",\n        width: 200\n      }, {\n        key: \"nickname\",\n        title: \"名称\",\n        align: \"center\",\n        width: 200\n      }, {\n        key: \"email\",\n        title: \"邮箱\",\n        align: \"center\",\n        width: 200\n      }, {\n        key: \"cellphone\",\n        title: \"电话号码\",\n        align: \"center\",\n        width: 200\n      }, {\n        key: \"gender\",\n        title: \"性别\",\n        align: \"center\",\n        width: 100,\n        render: function render(h, params) {\n          var row = params.row;\n          var color = row.gender === 1 ? \"blue\" : row.gender === 0 ? \"red\" : \"black\";\n          var text = row.gender === 1 ? \"男\" : row.gender === 0 ? \"女\" : \"空\";\n          return h(\"Tag\", {\n            props: {\n              type: \"border\",\n              color: color\n            }\n          }, text);\n        }\n      }, {\n        key: \"address\",\n        title: \"居住地址\",\n        align: \"center\",\n        width: 200\n      }, {\n        key: \"birthday\",\n        title: \"生日\",\n        align: \"center\",\n        width: 200\n      }, {\n        key: \"status\",\n        title: \"启用状态\",\n        align: \"center\",\n        width: 100,\n        render: function render(h, params) {\n          var texts = \"空值\";\n          var color = \"black\";\n\n          if (params.row.status == 0) {\n            texts = \"未启用\";\n            color = \"yellow\";\n          } else if (params.row.status == 1) {\n            texts = \"正常\";\n            color = \"green\";\n          } else if (params.row.status == 2) {\n            texts = \"禁用\";\n            color = \"red\";\n          } else if (params.row.status == 3) {\n            texts = \"删除\";\n            color = \"gray\";\n          } // return h('div',{props: {}},texts);\n\n\n          return h(\"Tag\", {\n            props: {\n              type: \"border\",\n              color: color\n            }\n          }, texts);\n        }\n      }, {\n        key: \"roleName\",\n        title: \"用户角色\",\n        align: \"center\",\n        width: 150,\n        render: function render(h, params) {\n          if (params.row.roleName) {\n            var rolearr = params.row.roleName.split(\",\");\n            var tags = [];\n            tags.push(h('Tag', {\n              props: {\n                type: \"border\"\n              }\n            }, rolearr[0]));\n\n            if (rolearr.length > 1) {\n              tags.push(h('Tag', {\n                props: {\n                  type: \"border\"\n                }\n              }, \"...\"));\n            } // for (var i = 0; i < rolearr.length; i++) {\n            //   tags.push(h('Tag',{props:{type:\"border\"}},rolearr[i]));\n            // }\n\n\n            return h('div', tags);\n          }\n        }\n      }, {\n        key: \"createTime\",\n        title: \"创建时间\",\n        align: \"center\",\n        width: 150,\n        render: function render(h, params) {\n          return h(\"div\", params.row.createTime == null ? \"\" : new Date(params.row.createTime).format(\"yyyy-MM-dd hh:mm:ss\"));\n        }\n      }, {\n        key: \"updateTime\",\n        title: \"最后更新时间\",\n        align: \"center\",\n        width: 150,\n        render: function render(h, params) {\n          return h(\"div\", params.row.updateTime == null ? \"\" : new Date(params.row.updateTime).format(\"yyyy-MM-dd hh:mm:ss\"));\n        }\n      }, {\n        key: \"descn\",\n        title: \"备注信息\",\n        align: \"center\",\n        width: 150\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        width: 150,\n        align: \"center\",\n        fixed: \"right\",\n        render: function render(h, params) {\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"primary\",\n              size: \"small\"\n            },\n            style: {\n              marginRight: \"5px\"\n            },\n            on: {\n              click: function click() {\n                _this.editUser(params);\n              }\n            }\n          }, \"修改\"), h(\"Button\", {\n            props: {\n              type: \"error\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.deleteUser(params, true);\n              }\n            }\n          }, \"删除\")]);\n        }\n      }],\n      userData: [],\n      statusList: [{\n        value: 0,\n        label: '不启用'\n      }, {\n        value: 1,\n        label: '正常'\n      }, {\n        value: 2,\n        label: '禁用' // ,\n        // {\n        //   value: 3,\n        //   label: '删除',\n        //   disabled:true\n        // }\n\n      }],\n      genderList: [{\n        value: 1,\n        label: '男'\n      }, {\n        value: 0,\n        label: '女'\n      }],\n      userSearchData: {\n        username: \"\",\n        nickname: \"\",\n        status: 1,\n        gender: null,\n        cellphone: \"\"\n      },\n      pageInfo: {\n        totalPages: 0,\n        currentPage: 1,\n        pageSize: 10,\n        pageSizeOpt: [10, 20, 30, 50]\n      },\n      value1: [1, 2],\n      addUserModal: false,\n      roleModal: false,\n      userFormItem: {\n        modalTitle: \"\",\n        modalSubmitType: \"\",\n        nameDisable: false,\n        id: \"\",\n        username: \"\",\n        nickname: \"\",\n        email: \"\",\n        cellphone: \"\",\n        address: \"\",\n        gender: 1,\n        status: 1,\n        birthday: \"\",\n        descn: \"\"\n      },\n      roleFormItem: {\n        roleList: [],\n        allRoles: []\n      },\n      userRuleValidate: {\n        username: [{\n          required: true,\n          message: \"帐号不能为空\",\n          trigger: \"blur\"\n        }],\n        nickname: [{\n          required: true,\n          message: \"姓名不能为空\",\n          trigger: \"blur\"\n        }],\n        email: [{\n          type: \"email\",\n          message: \"邮箱格式错误\",\n          trigger: \"blur\"\n        }]\n      },\n      roleRuleValidate: {\n        roleList: [{\n          required: true,\n          type: 'array',\n          min: 1,\n          message: '最少选择一个角色',\n          trigger: 'change'\n        }, {\n          type: 'array',\n          max: 5,\n          message: '最多选择五个角色',\n          trigger: 'change'\n        }]\n      },\n      loading: true,\n      userModalLoading: true,\n      userTableSelectData: [],\n      canEditUserRole: true,\n      canDelete: true\n    };\n  },\n  methods: {\n    init: function init() {//加载所有角色\n      //this.initRoles();\n    },\n    changePage: function changePage(page) {\n      this.pageInfo.currentPage = page;\n      this.refreshTable();\n    },\n    changeSize: function changeSize(size) {\n      this.pageInfo.pageSize = size;\n      this.refreshTable();\n    },\n    refreshTable: function refreshTable() {\n      var _this2 = this;\n\n      this.loading = true;\n      var data = {\n        username: this.userSearchData.username,\n        nickname: this.userSearchData.nickname,\n        gender: this.userSearchData.gender,\n        cellphone: this.userSearchData.cellphone,\n        status: this.userSearchData.status,\n        currentPage: this.pageInfo.currentPage,\n        pageSize: this.pageInfo.pageSize\n      };\n      var token = \"123\"; // axios-查询用户数据\n\n      axFindUsersWithPaging({\n        data: data,\n        token: token\n      }).then(function (res) {\n        _this2.pageInfo.totalPages = res.data.data.total;\n        _this2.userData = res.data.data.list;\n        _this2.loading = false;\n      }).catch(function (err) {\n        _this2.$Notice.error({\n          title: \"错误提示\",\n          duration: 5,\n          desc: err + \"<br/>无法获取后台数据！\"\n        });\n\n        _this2.loading = false;\n      });\n    },\n    //查询角色\n    initRoles: function initRoles() {\n      var _this3 = this;\n\n      this.roleFormItem.roleList = [];\n      var selectUser = this.userTableSelectData;\n      var userId = null;\n\n      if (selectUser.length == 1) {\n        userId = selectUser[0].id;\n      }\n\n      var data = {\n        \"userId\": userId\n      };\n      var token = \"123\"; //axios-查询用户角色\n\n      axFindAllRoles({\n        data: data,\n        token: token\n      }).then(function (res) {\n        _this3.roleFormItem.allRoles = res.data.data.allRole;\n        _this3.roleFormItem.roleList = res.data.data.userRole;\n      }).catch(function (err) {\n        _this3.$Notice.error({\n          title: \"错误提示\",\n          duration: 5,\n          desc: err + \"<br/>无法获取后台数据！\"\n        });\n      });\n    },\n    handleSearchUser: function handleSearchUser() {\n      this.refreshTable();\n    },\n    handleCancelUser: function handleCancelUser(name) {\n      this.$refs[name].resetFields();\n    },\n    addUser: function addUser() {\n      this.userFormItem = {};\n      this.userFormItem.gender = 1;\n      this.userFormItem.status = 1;\n      this.userFormItem.modalTitle = \"添加用户\";\n      this.userFormItem.modalSubmitType = \"add\";\n      this.userFormItem.nameDisable = false;\n      this.addUserModal = true;\n    },\n    editUser: function editUser(rowdata) {\n      this.userFormItem = rowdata.row;\n      this.userFormItem.nameDisable = true;\n      this.userFormItem.modalTitle = \"修改用户\";\n      this.userFormItem.modalSubmitType = \"edit\";\n      this.addUserModal = true;\n    },\n    deleteUser: function deleteUser(data, isbatch) {\n      var _this4 = this;\n\n      if (isbatch) {\n        this.userTableSelectData = [];\n        this.userTableSelectData[0] = data.row;\n      }\n\n      if (this.userTableSelectData.length > 0) {\n        this.$Modal.confirm({\n          title: \"提示\",\n          content: \"<h2>确定删除用户信息？</h2>\",\n          onOk: function onOk() {\n            var ids = \"\";\n\n            for (var i = 0; i < _this4.userTableSelectData.length; i++) {\n              if (i > 0) {\n                ids = ids + \",\";\n              }\n\n              ids = ids + _this4.userTableSelectData[i].id;\n            }\n\n            var params = new URLSearchParams();\n            params.append('data', ids);\n            params.append('token', '123'); //axios-删除用户\n\n            axDeleteUser(params).then(function (res) {\n              _this4.$Notice.success({\n                // title: '提示消息',\n                duration: 3,\n                desc: \"删除用户成功！\"\n              });\n\n              _this4.refreshTable();\n\n              _this4.$Loading.finish();\n            }).catch(function (err) {\n              _this4.$Notice.error({\n                title: \"错误提示\",\n                duration: 5,\n                desc: err + \"<br/>无法获取后台数据！\"\n              });\n\n              _this4.loading = false;\n            });\n          }\n        });\n      }\n    },\n    //修改用户角色\n    editUserRole: function editUserRole() {\n      this.initRoles();\n      this.roleModal = true;\n    },\n    showUserColumns: function showUserColumns() {},\n    //添加用户\n    userModalSubmit: function userModalSubmit(name) {\n      var _this5 = this;\n\n      this.$refs[name].validate(function (valid) {\n        if (valid) {\n          var params = new URLSearchParams();\n          params.append('data', JSON.stringify(_this5.userFormItem));\n          params.append('token', '123');\n\n          if (_this5.userFormItem.modalSubmitType == \"add\") {\n            axAddUser(params).then(function (res) {\n              if (res.data.code == 200) {\n                _this5.$Notice.success({\n                  // title: '提示消息',\n                  duration: 3,\n                  desc: \"用户添加成功！\"\n                });\n\n                _this5.refreshTable();\n\n                _this5.$refs[name].resetFields();\n\n                _this5.loading = false;\n                _this5.addUserModal = false;\n              } else {\n                _this5.$Modal.error({\n                  width: 650,\n                  title: \"错误提示\",\n                  content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>错误代码： \" + res.data.code + \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" + res.data.message + \"</p>\"\n                });\n\n                _this5.loading = false;\n                _this5.addUserModal = false;\n              }\n            }).catch(function (error) {\n              _this5.$Notice.error({\n                title: \"错误提示\",\n                duration: 5,\n                desc: error + \"<br/>无法获取后台数据！\"\n              });\n\n              _this5.loading = false;\n              _this5.addUserModal = false;\n            }); //修改用户\n          } else if (_this5.userFormItem.modalSubmitType == \"edit\") {\n            axUpdateUser(params).then(function (res) {\n              if (res.data.code == 200) {\n                _this5.$Notice.success({\n                  // title: '提示消息',\n                  duration: 3,\n                  desc: \"用户修改成功！\"\n                });\n\n                _this5.refreshTable();\n\n                _this5.$refs[name].resetFields();\n\n                _this5.loading = false;\n                _this5.addUserModal = false;\n              }\n\n              if (res.data.code == 500) {\n                _this5.$Modal.error({\n                  width: 650,\n                  title: \"错误提示\",\n                  content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>错误代码： \" + res.data.code + \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" + res.data.message + \"</p>\"\n                });\n\n                _this5.loading = false;\n                _this5.addUserModal = false;\n              }\n            }).catch(function (error) {\n              _this5.$Notice.error({\n                title: \"错误提示\",\n                duration: 5,\n                desc: error + \"<br/>无法获取后台数据！\"\n              });\n\n              _this5.loading = false;\n              _this5.addUserModal = false;\n            });\n          } else {\n            _this5.$Message.error(\"Fail!  DATA ERROR!!!\");\n          }\n        } else {\n          setTimeout(function () {\n            _this5.userModalLoading = false;\n            _this5.loading = false;\n\n            _this5.$nextTick(function () {\n              _this5.userModalLoading = true;\n            });\n          }, 1000);\n\n          _this5.$Message.error({\n            content: '请检查表单填写信息!',\n            duration: 3\n          });\n        }\n      }); //清除验证\n\n      this.$refs[name].resetFields();\n    },\n    userModalCancel: function userModalCancel(name) {\n      this.$refs[name].resetFields();\n\n      if (this.userFormItem.modalSubmitType == \"edit\") {\n        this.refreshTable();\n      }\n\n      this.addUserModal = false;\n    },\n    selectionChange: function selectionChange(selection) {\n      if (selection.length == 0) {\n        this.canEditUserRole = true;\n        this.canDelete = true;\n      } else if (selection.length >= 1) {\n        this.canEditUserRole = false;\n        this.canDelete = false;\n      }\n\n      this.userTableSelectData = selection;\n    },\n    //修改用户角色信息\n    roleModalSubmit: function roleModalSubmit() {\n      var _this6 = this;\n\n      var userids = [];\n\n      for (var i = 0; i < this.userTableSelectData.length; i++) {\n        userids[i] = this.userTableSelectData[i].id;\n      }\n\n      var data = {\n        userId: userids,\n        roleId: this.roleFormItem.roleList\n      };\n      var postData = this.$qs.stringify({\n        data: JSON.stringify(data),\n        token: \"123\"\n      });\n      this.$axios.post(\"/admin-server/user/updateUserRole\", postData).then(function (res) {\n        console.log(res);\n\n        if (res.data.code == 200) {\n          _this6.$Notice.success({\n            // title: '提示消息',\n            duration: 3,\n            desc: \"修改用户角色成功！\"\n          });\n\n          _this6.refreshTable();\n\n          _this6.$Loading.finish();\n        } else {\n          _this6.$Modal.error({\n            width: 650,\n            title: \"错误提示\",\n            content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" + res.data.msg + \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" + res.data.data + \"</p>\"\n          });\n\n          _this6.$Loading.error();\n        }\n      });\n    },\n    roleModalCancel: function roleModalCancel() {}\n  },\n  mounted: function mounted() {\n    this.$Loading.start();\n    this.init();\n    this.refreshTable();\n    this.$Loading.finish();\n  }\n};",{"version":3,"sources":["usermain.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <Row>\r\n      <Col span=\"24\">\r\n      <Card :dis-hover=\"true\">\r\n        <p slot=\"title\">\r\n          <Icon type=\"md-person\"></Icon>\r\n          用户列表\r\n        </p>\r\n        <Card style=\"padding-top:20px;\" :padding=\"0\">\r\n          <Form ref=\"userSearchData\" :model=\"userSearchData\" style=\"margin:0px\" inline>\r\n            <FormItem label=\"帐号\" prop=\"username\" :label-width=50>\r\n              <Input v-model=\"userSearchData.username\" placeholder=\"帐号\" />\r\n            </FormItem>\r\n            <FormItem label=\"名称\" prop=\"nickname\" :label-width=50>\r\n              <Input type=\"text\" v-model=\"userSearchData.nickname\" placeholder=\"名称\" />\r\n            </FormItem>\r\n            <FormItem label=\"手机号\" prop=\"cellphone\" :label-width=50>\r\n              <Input type=\"text\" v-model=\"userSearchData.cellphone\" placeholder=\"手机号\" />\r\n            </FormItem>\r\n            <FormItem label=\"性别\" prop=\"gender\" :label-width=50>\r\n              <Select v-model=\"userSearchData.gender\" clearable style=\"width:70px\">\r\n                <Option v-for=\"item in genderList\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"状态\" prop=\"status\" :label-width=50>\r\n              <Select v-model=\"userSearchData.status\" clearable style=\"width:70px\">\r\n                <Option v-for=\"item in statusList\" :value=\"item.value\" :key=\"item.value\" :disabled=\"item.disabled\">{{ item.label }}</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem>\r\n              <span style=\"padding-left:50px;\" />\r\n              <Button type=\"primary\" @click=\"handleSearchUser\" icon=\"md-search\">搜索</Button>\r\n            </FormItem>\r\n            <FormItem>\r\n              <Button @click=\"handleCancelUser('userSearchData')\" icon=\"md-refresh\">重置</Button>\r\n            </FormItem>\r\n          </Form>\r\n        </Card>\r\n        <Card style=\"margin-top:10px;\">\r\n          <Row type=\"flex\" justify=\"start\">\r\n            <ButtonGroup size=\"large\">\r\n              <Button icon=\"md-add\" @click=\"addUser\">添加</Button>\r\n              <Button icon=\"md-settings\" @click=\"editUserRole\" :disabled=\"canEditUserRole\">修改用户角色</Button>\r\n              <Button icon=\"md-close\" @click=\"deleteUser\" :disabled=\"canDelete\">删除</Button>\r\n            </ButtonGroup>\r\n            <span style=\"margin-left:10px;\" />\r\n            <ButtonGroup size=\"large\">\r\n              <Button icon=\"md-refresh\" @click=\"refreshTable\">刷新</Button>\r\n              <Button icon=\"md-reorder\" @click=\"showUserColumns\">显示列</Button>\r\n            </ButtonGroup>\r\n          </Row>\r\n        </Card>\r\n        <Card style=\"margin-top:10px;\" :padding=\"0\" :bordered=\"false\">\r\n          <Row>\r\n            <Table height=\"520\" :loading=\"loading\" :columns=\"userColumn\" :data=\"userData\" border stripe @on-selection-change=\"selectionChange\"></Table>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"center\">\r\n            <Page style=\"margin:10px;\" :total=\"pageInfo.totalPages\" :current=\"pageInfo.currentPage\" :page-size=\"pageInfo.pageSize\" :page-size-opts=\"pageInfo.pageSizeOpt\" @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-elevator show-sizer show-total placement=\"top\"></Page>\r\n          </Row>\r\n        </Card>\r\n      </Card>\r\n      </Col>\r\n    </Row>\r\n    <!-- :loading=\"userModalLoading\" ok-text=\"提交\" cancel-text=\"取消\" @on-ok=\"userModalSubmit('userFormItem')\" @on-cancel=\"userModalCancel('userFormItem')\" -->\r\n    <Modal :title=\"userFormItem.modalTitle\" v-model=\"addUserModal\" :closable=\"false\" :mask-closable=\"false\"  :loading=\"userModalLoading\" ok-text=\"提交\" cancel-text=\"取消\" @on-ok=\"userModalSubmit('userFormItem')\" @on-cancel=\"userModalCancel('userFormItem')\">\r\n      <Form ref=\"userFormItem\" :model=\"userFormItem\" :rules=\"userRuleValidate\" :label-width=80>\r\n        <FormItem label=\"帐号\" prop=\"username\">\r\n          <Input v-model=\"userFormItem.username\" :disabled=\"userFormItem.nameDisable\" placeholder=\"输入登录帐号...\" />\r\n        </FormItem>\r\n        <FormItem label=\"姓名\" prop=\"nickname\">\r\n          <Input v-model=\"userFormItem.nickname\" placeholder=\"输入用户名称...\" />\r\n        </FormItem>\r\n        <FormItem label=\"手机号\" prop=\"cellphone\">\r\n          <Input v-model=\"userFormItem.cellphone\" placeholder=\"输入手机号...\" />\r\n        </FormItem>\r\n        <FormItem label=\"邮箱\" prop=\"email\">\r\n          <Input v-model=\"userFormItem.email\" placeholder=\"输入邮箱...\" />\r\n        </FormItem>\r\n        <FormItem label=\"地址\" prop=\"address\">\r\n          <Input v-model=\"userFormItem.address\" placeholder=\"输入居住地址...\" />\r\n        </FormItem>\r\n        <FormItem label=\"出生日期\" prop=\"birthday\">\r\n          <Row>\r\n            <Col span=\"11\">\r\n            <DatePicker type=\"date\" format=\"yyyy-MM-dd\" placeholder=\"选择日期\" @on-change=\"userFormItem.birthday=$event\" value=\"userFormItem.birthday\" />\r\n            </Col>\r\n          </Row>\r\n        </FormItem>\r\n        <FormItem label=\"性别\" prop=\"gender\">\r\n          <RadioGroup v-model=\"userFormItem.gender\">\r\n            <Radio v-for=\"item in genderList\" :label='item.value'>{{item.label}}</Radio>\r\n          </RadioGroup>\r\n        </FormItem>\r\n        <FormItem label=\"用户状态\" prop=\"status\">\r\n          <Select v-model=\"userFormItem.status\">\r\n            <Option v-for=\"item in statusList\" :value=\"item.value\" :key=\"item.value\" :disabled=\"item.disabled\">{{ item.label }}</Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"备注\" prop=\"descn\">\r\n          <Input v-model=\"userFormItem.descn\" type=\"textarea\" :autosize=\"{minRows: 2,maxRows: 5}\" placeholder=\"备注信息...\" />\r\n        </FormItem>\r\n      </Form>\r\n      <!-- <div slot=\"footer\">\r\n        <Button type=\"text\" size=\"large\" @click=\"userModalCancel('userFormItem')\">取消</Button>\r\n        <Button type=\"primary\" size=\"large\" @click=\"userModalSubmit('userFormItem')\">确定</Button>\r\n      </div> -->\r\n    </Modal>\r\n\r\n    <Modal title=\"修改用户角色\" v-model=\"roleModal\" :closable=\"false\" :mask-closable=\"false\" ok-text=\"提交\" cancel-text=\"取消\" @on-ok=\"roleModalSubmit()\" @on-cancel=\"roleModalCancel()\">\r\n      <Form :rules=\"roleRuleValidate\" ref=\"roleFormItem\" :model=\"roleFormItem\">\r\n        <FormItem prop=\"roleList\">\r\n          <CheckboxGroup v-model=\"roleFormItem.roleList\">\r\n            <Checkbox v-for=\"item in roleFormItem.allRoles\" :label=\"item.id\">{{item.name}}&nbsp;&nbsp;({{item.descn}})&nbsp;&nbsp;</Checkbox>\r\n          </CheckboxGroup>\r\n        </FormItem>\r\n        <!--  {{this.roleFormItem.roleList}} -->\r\n      </Form>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport { axFindUsersWithPaging, axAddUser, axUpdateUser, axDeleteUser } from '@/api/userinfo'\r\nimport { axFindAllRoles } from '@/api/roleinfo'\r\nexport default {\r\n  name: \"userinfo-table\",\r\n\r\n  data() {\r\n    return {\r\n\r\n      userColumn: [{\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n          fixed: \"left\"\r\n        },\r\n        {\r\n          type: \"ind\",\r\n          title: \"序号\",\r\n          width: 65,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return h(\r\n              \"span\",\r\n              params.index +\r\n              (this.pageInfo.currentPage - 1) * this.pageInfo.pageSize +\r\n              1\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"username\",\r\n          title: \"帐号\",\r\n          align: \"center\",\r\n          width: 200\r\n        },\r\n        {\r\n          key: \"nickname\",\r\n          title: \"名称\",\r\n          align: \"center\",\r\n          width: 200\r\n        },\r\n        {\r\n          key: \"email\",\r\n          title: \"邮箱\",\r\n          align: \"center\",\r\n          width: 200\r\n        },\r\n        {\r\n          key: \"cellphone\",\r\n          title: \"电话号码\",\r\n          align: \"center\",\r\n          width: 200\r\n        },\r\n        {\r\n          key: \"gender\",\r\n          title: \"性别\",\r\n          align: \"center\",\r\n          width: 100,\r\n          render: (h, params) => {\r\n            const row = params.row;\r\n            const color =\r\n              row.gender === 1 ? \"blue\" : row.gender === 0 ? \"red\" : \"black\";\r\n            const text =\r\n              row.gender === 1 ? \"男\" : row.gender === 0 ? \"女\" : \"空\";\r\n            return h(\r\n              \"Tag\", {\r\n                props: {\r\n                  type: \"border\",\r\n                  color: color\r\n                }\r\n              },\r\n              text\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"address\",\r\n          title: \"居住地址\",\r\n          align: \"center\",\r\n          width: 200\r\n        },\r\n        {\r\n          key: \"birthday\",\r\n          title: \"生日\",\r\n          align: \"center\",\r\n          width: 200\r\n        },\r\n        {\r\n          key: \"status\",\r\n          title: \"启用状态\",\r\n          align: \"center\",\r\n          width: 100,\r\n          render: (h, params) => {\r\n            let texts = \"空值\";\r\n            let color = \"black\";\r\n            if (params.row.status == 0) {\r\n              texts = \"未启用\";\r\n              color = \"yellow\";\r\n            } else if (params.row.status == 1) {\r\n              texts = \"正常\";\r\n              color = \"green\";\r\n            } else if (params.row.status == 2) {\r\n              texts = \"禁用\";\r\n              color = \"red\";\r\n            } else if (params.row.status == 3) {\r\n              texts = \"删除\";\r\n              color = \"gray\";\r\n            }\r\n            // return h('div',{props: {}},texts);\r\n            return h(\r\n              \"Tag\", {\r\n                props: {\r\n                  type: \"border\",\r\n                  color: color\r\n                }\r\n              },\r\n              texts\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"roleName\",\r\n          title: \"用户角色\",\r\n          align: \"center\",\r\n          width: 150,\r\n          render: (h, params) => {\r\n            if (params.row.roleName) {\r\n              let rolearr = params.row.roleName.split(\",\");\r\n              var tags = [];\r\n              tags.push(h('Tag', { props: { type: \"border\" } }, rolearr[0]));\r\n              if (rolearr.length > 1) {\r\n                tags.push(h('Tag', { props: { type: \"border\" } }, \"...\"));\r\n              }\r\n              // for (var i = 0; i < rolearr.length; i++) {\r\n              //   tags.push(h('Tag',{props:{type:\"border\"}},rolearr[i]));\r\n              // }\r\n              return h('div', tags);\r\n            }\r\n          }\r\n        },\r\n        {\r\n          key: \"createTime\",\r\n          title: \"创建时间\",\r\n          align: \"center\",\r\n          width: 150,\r\n          render: function(h, params) {\r\n            return h(\r\n              \"div\",\r\n              params.row.createTime == null ?\r\n              \"\" :\r\n              new Date(params.row.createTime).format(\"yyyy-MM-dd hh:mm:ss\")\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"updateTime\",\r\n          title: \"最后更新时间\",\r\n          align: \"center\",\r\n          width: 150,\r\n          render: function(h, params) {\r\n            return h(\r\n              \"div\",\r\n              params.row.updateTime == null ?\r\n              \"\" :\r\n              new Date(params.row.updateTime).format(\"yyyy-MM-dd hh:mm:ss\")\r\n            );\r\n          }\r\n        },\r\n        {\r\n          key: \"descn\",\r\n          title: \"备注信息\",\r\n          align: \"center\",\r\n          width: 150\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          width: 150,\r\n          align: \"center\",\r\n          fixed: \"right\",\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              h(\r\n                \"Button\", {\r\n                  props: {\r\n                    type: \"primary\",\r\n                    size: \"small\"\r\n                  },\r\n                  style: {\r\n                    marginRight: \"5px\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.editUser(params);\r\n                    }\r\n                  }\r\n                },\r\n                \"修改\"\r\n              ),\r\n              h(\r\n                \"Button\", {\r\n                  props: {\r\n                    type: \"error\",\r\n                    size: \"small\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.deleteUser(params, true);\r\n                    }\r\n                  }\r\n                },\r\n                \"删除\"\r\n              )\r\n            ]);\r\n          }\r\n        }\r\n      ],\r\n\r\n      userData: [],\r\n\r\n      statusList: [{\r\n          value: 0,\r\n          label: '不启用'\r\n        },\r\n        {\r\n          value: 1,\r\n          label: '正常'\r\n        },\r\n        {\r\n          value: 2,\r\n          label: '禁用'\r\n        }\r\n        // ,\r\n        // {\r\n        //   value: 3,\r\n        //   label: '删除',\r\n        //   disabled:true\r\n        // }\r\n      ],\r\n      genderList: [{\r\n        value: 1,\r\n        label: '男'\r\n      }, {\r\n        value: 0,\r\n        label: '女'\r\n      }],\r\n      userSearchData: {\r\n        username: \"\",\r\n        nickname: \"\",\r\n        status: 1,\r\n        gender: null,\r\n        cellphone: \"\"\r\n      },\r\n\r\n      pageInfo: {\r\n        totalPages: 0,\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        pageSizeOpt: [10, 20, 30, 50]\r\n      },\r\n      value1: [1, 2],\r\n\r\n      addUserModal: false,\r\n      roleModal: false,\r\n\r\n      userFormItem: {\r\n        modalTitle: \"\",\r\n        modalSubmitType: \"\",\r\n        nameDisable: false,\r\n        id: \"\",\r\n        username: \"\",\r\n        nickname: \"\",\r\n        email: \"\",\r\n        cellphone: \"\",\r\n        address: \"\",\r\n        gender: 1,\r\n        status: 1,\r\n        birthday: \"\",\r\n        descn: \"\"\r\n      },\r\n      roleFormItem: {\r\n        roleList: [],\r\n        allRoles: []\r\n      },\r\n      userRuleValidate: {\r\n        username: [\r\n          { required: true, message: \"帐号不能为空\", trigger: \"blur\" }\r\n        ],\r\n        nickname: [\r\n          { required: true, message: \"姓名不能为空\", trigger: \"blur\" }\r\n        ],\r\n        email: [{ type: \"email\", message: \"邮箱格式错误\", trigger: \"blur\" }]\r\n      },\r\n\r\n      roleRuleValidate: {\r\n        roleList: [\r\n          { required: true, type: 'array', min: 1, message: '最少选择一个角色', trigger: 'change' },\r\n          { type: 'array', max: 5, message: '最多选择五个角色', trigger: 'change' }\r\n        ]\r\n      },\r\n\r\n      loading: true,\r\n      userModalLoading: true,\r\n      userTableSelectData: [],\r\n      canEditUserRole: true,\r\n      canDelete: true\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      //加载所有角色\r\n      //this.initRoles();\r\n    },\r\n    changePage(page) {\r\n      this.pageInfo.currentPage = page;\r\n      this.refreshTable();\r\n    },\r\n    changeSize(size) {\r\n      this.pageInfo.pageSize = size;\r\n      this.refreshTable();\r\n    },\r\n    refreshTable() {\r\n      this.loading = true;\r\n      var data = {\r\n        username: this.userSearchData.username,\r\n        nickname: this.userSearchData.nickname,\r\n        gender: this.userSearchData.gender,\r\n        cellphone: this.userSearchData.cellphone,\r\n        status: this.userSearchData.status,\r\n        currentPage: this.pageInfo.currentPage,\r\n        pageSize: this.pageInfo.pageSize\r\n      };\r\n      var token = \"123\";\r\n\r\n      // axios-查询用户数据\r\n      axFindUsersWithPaging({ data, token }).then(res => {\r\n        this.pageInfo.totalPages = res.data.data.total;\r\n        this.userData = res.data.data.list;\r\n        this.loading = false;\r\n      }).catch(err => {\r\n        this.$Notice.error({\r\n          title: \"错误提示\",\r\n          duration: 5,\r\n          desc: err + \"<br/>无法获取后台数据！\"\r\n        });\r\n        this.loading = false;\r\n      });\r\n    },\r\n\r\n    //查询角色\r\n    initRoles() {\r\n      this.roleFormItem.roleList = [];\r\n      var selectUser = this.userTableSelectData;\r\n      let userId = null;\r\n      if (selectUser.length == 1) {\r\n        userId = selectUser[0].id;\r\n      }\r\n      var data = { \"userId\": userId };\r\n      var token = \"123\";\r\n\r\n      //axios-查询用户角色\r\n      axFindAllRoles({ data, token }).then(res => {\r\n        this.roleFormItem.allRoles = res.data.data.allRole;\r\n        this.roleFormItem.roleList = res.data.data.userRole;\r\n      }).catch(err => {\r\n        this.$Notice.error({\r\n          title: \"错误提示\",\r\n          duration: 5,\r\n          desc: err + \"<br/>无法获取后台数据！\"\r\n        });\r\n      });\r\n    },\r\n\r\n    handleSearchUser() {\r\n      this.refreshTable();\r\n    },\r\n    handleCancelUser(name) {\r\n      this.$refs[name].resetFields();\r\n    },\r\n\r\n    addUser() {\r\n      this.userFormItem = {};\r\n      this.userFormItem.gender = 1;\r\n      this.userFormItem.status = 1;\r\n      this.userFormItem.modalTitle = \"添加用户\";\r\n      this.userFormItem.modalSubmitType = \"add\";\r\n      this.userFormItem.nameDisable = false;\r\n      this.addUserModal = true;\r\n    },\r\n    editUser(rowdata) {\r\n      this.userFormItem = rowdata.row;\r\n      this.userFormItem.nameDisable = true;\r\n      this.userFormItem.modalTitle = \"修改用户\";\r\n      this.userFormItem.modalSubmitType = \"edit\";\r\n      this.addUserModal = true;\r\n    },\r\n    deleteUser(data, isbatch) {\r\n      if (isbatch) {\r\n        this.userTableSelectData = [];\r\n        this.userTableSelectData[0] = data.row;\r\n      }\r\n      if (this.userTableSelectData.length > 0) {\r\n        this.$Modal.confirm({\r\n          title: \"提示\",\r\n          content: \"<h2>确定删除用户信息？</h2>\",\r\n          onOk: () => {\r\n            let ids = \"\";\r\n            for (var i = 0; i < this.userTableSelectData.length; i++) {\r\n              if (i > 0) {\r\n                ids = ids + \",\"\r\n              }\r\n              ids = ids + this.userTableSelectData[i].id;\r\n            }\r\n\r\n\r\n            let params = new URLSearchParams();\r\n            params.append('data', ids);\r\n            params.append('token', '123');\r\n\r\n            //axios-删除用户\r\n            axDeleteUser(params).then(res => {\r\n              this.$Notice.success({\r\n                // title: '提示消息',\r\n                duration: 3,\r\n                desc: \"删除用户成功！\"\r\n              });\r\n              this.refreshTable();\r\n              this.$Loading.finish();\r\n            }).catch(err => {\r\n              this.$Notice.error({\r\n                title: \"错误提示\",\r\n                duration: 5,\r\n                desc: err + \"<br/>无法获取后台数据！\"\r\n              });\r\n              this.loading = false;\r\n            });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    //修改用户角色\r\n    editUserRole() {\r\n      this.initRoles();\r\n      this.roleModal = true;\r\n    },\r\n    showUserColumns() {},\r\n    //添加用户\r\n    userModalSubmit(name) {\r\n\r\n      this.$refs[name].validate(valid => {\r\n        if (valid) {\r\n\r\n          let params = new URLSearchParams();\r\n          params.append('data', JSON.stringify(this.userFormItem));\r\n          params.append('token', '123');\r\n\r\n          if (this.userFormItem.modalSubmitType == \"add\") {\r\n            axAddUser(params).then(res => {\r\n              if (res.data.code == 200) {\r\n                this.$Notice.success({\r\n                  // title: '提示消息',\r\n                  duration: 3,\r\n                  desc: \"用户添加成功！\"\r\n                });\r\n                this.refreshTable();\r\n                this.$refs[name].resetFields();\r\n                this.loading = false;\r\n                this.addUserModal=false;\r\n              } else {\r\n                this.$Modal.error({\r\n                  width: 650,\r\n                  title: \"错误提示\",\r\n                  content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>错误代码： \" + res.data.code +\r\n                    \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" + res.data.message + \"</p>\"\r\n                });\r\n                this.loading = false;\r\n                this.addUserModal=false;\r\n              }\r\n            }).catch(error => {\r\n              this.$Notice.error({ title: \"错误提示\", duration: 5, desc: error + \"<br/>无法获取后台数据！\" });\r\n              this.loading = false;\r\n              this.addUserModal=false;\r\n            });\r\n            //修改用户\r\n          } else if (this.userFormItem.modalSubmitType == \"edit\") {\r\n            axUpdateUser(params).then(res => {\r\n                if (res.data.code == 200) {\r\n                  this.$Notice.success({\r\n                    // title: '提示消息',\r\n                    duration: 3,\r\n                    desc: \"用户修改成功！\"\r\n                  });\r\n                  this.refreshTable();\r\n                  this.$refs[name].resetFields();\r\n                  this.loading = false;\r\n                  this.addUserModal=false;\r\n                }\r\n                if (res.data.code == 500) {\r\n                  this.$Modal.error({\r\n                    width: 650,\r\n                    title: \"错误提示\",\r\n                    content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>错误代码： \" +\r\n                      res.data.code +\r\n                      \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" +\r\n                      res.data.message +\r\n                      \"</p>\"\r\n                  });\r\n                  this.loading = false;\r\n                  this.addUserModal=false;\r\n                }\r\n              })\r\n              .catch(error => {\r\n                this.$Notice.error({\r\n                  title: \"错误提示\",\r\n                  duration: 5,\r\n                  desc: error + \"<br/>无法获取后台数据！\"\r\n                });\r\n                this.loading = false;\r\n                this.addUserModal=false;\r\n              });\r\n          } else {\r\n            this.$Message.error(\"Fail!  DATA ERROR!!!\");\r\n          }\r\n        } else {\r\n          setTimeout(() => {\r\n            this.userModalLoading = false;\r\n            this.loading = false;\r\n            this.$nextTick(() => {\r\n              this.userModalLoading = true;\r\n            });\r\n          }, 1000);\r\n          this.$Message.error({\r\n            content: '请检查表单填写信息!',\r\n            duration: 3\r\n          });\r\n        }\r\n      });\r\n\r\n      //清除验证\r\n      this.$refs[name].resetFields();\r\n    },\r\n    userModalCancel(name) {\r\n      this.$refs[name].resetFields();\r\n      if (this.userFormItem.modalSubmitType == \"edit\") {\r\n        this.refreshTable();\r\n      }\r\n      this.addUserModal=false;\r\n    },\r\n    selectionChange(selection) {\r\n      if (selection.length == 0) {\r\n        this.canEditUserRole = true;\r\n        this.canDelete = true;\r\n      } else if (selection.length >= 1) {\r\n        this.canEditUserRole = false;\r\n        this.canDelete = false;\r\n      }\r\n      this.userTableSelectData = selection;\r\n    },\r\n    //修改用户角色信息\r\n    roleModalSubmit() {\r\n      var userids = [];\r\n      for (var i = 0; i < this.userTableSelectData.length; i++) {\r\n        userids[i] = this.userTableSelectData[i].id;\r\n      }\r\n      var data = {\r\n        userId: userids,\r\n        roleId: this.roleFormItem.roleList\r\n      };\r\n\r\n      let postData = this.$qs.stringify({\r\n        data: JSON.stringify(data),\r\n        token: \"123\"\r\n      });\r\n\r\n      this.$axios\r\n        .post(\"/admin-server/user/updateUserRole\", postData)\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.data.code == 200) {\r\n            this.$Notice.success({\r\n              // title: '提示消息',\r\n              duration: 3,\r\n              desc: \"修改用户角色成功！\"\r\n            });\r\n            this.refreshTable();\r\n            this.$Loading.finish();\r\n          } else {\r\n            this.$Modal.error({\r\n              width: 650,\r\n              title: \"错误提示\",\r\n              content: \"<p style='text-align:left;color:red;font-size:20px;word-wrap:break-word; word-break:normal;'>500 \" +\r\n                res.data.msg +\r\n                \" </p><p style='font-size:14px;word-wrap:break-word; word-break:normal;'>详细内容：\" +\r\n                res.data.data +\r\n                \"</p>\"\r\n            });\r\n            this.$Loading.error();\r\n          }\r\n        });\r\n    },\r\n\r\n    roleModalCancel() {\r\n\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$Loading.start();\r\n\r\n    this.init();\r\n    this.refreshTable();\r\n\r\n    this.$Loading.finish();\r\n  }\r\n};\r\n\r\n</script>\r\n"],"sourceRoot":"src\\view\\user-manager\\userinfo"}]}